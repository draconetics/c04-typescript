{"E:\\react\\c04-typescript\\backend\\src\\app.ts":{"path":"E:\\react\\c04-typescript\\backend\\src\\app.ts","statementMap":{"0":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"1":{"start":{"line":3,"column":4},"end":{"line":3,"column":62}},"2":{"start":{"line":5,"column":0},"end":{"line":5,"column":62}},"3":{"start":{"line":6,"column":18},"end":{"line":6,"column":53}},"4":{"start":{"line":7,"column":15},"end":{"line":7,"column":47}},"5":{"start":{"line":8,"column":17},"end":{"line":8,"column":51}},"6":{"start":{"line":10,"column":21},"end":{"line":10,"column":68}},"7":{"start":{"line":11,"column":21},"end":{"line":11,"column":68}},"8":{"start":{"line":12,"column":21},"end":{"line":12,"column":68}},"9":{"start":{"line":13,"column":27},"end":{"line":13,"column":67}},"10":{"start":{"line":14,"column":30},"end":{"line":14,"column":73}},"11":{"start":{"line":15,"column":12},"end":{"line":15,"column":31}},"12":{"start":{"line":17,"column":0},"end":{"line":17,"column":33}},"13":{"start":{"line":18,"column":0},"end":{"line":18,"column":26}},"14":{"start":{"line":19,"column":0},"end":{"line":19,"column":59}},"15":{"start":{"line":20,"column":0},"end":{"line":20,"column":34}},"16":{"start":{"line":21,"column":0},"end":{"line":21,"column":30}},"17":{"start":{"line":22,"column":0},"end":{"line":22,"column":30}},"18":{"start":{"line":23,"column":0},"end":{"line":23,"column":30}},"19":{"start":{"line":24,"column":0},"end":{"line":26,"column":3}},"20":{"start":{"line":25,"column":4},"end":{"line":25,"column":73}},"21":{"start":{"line":27,"column":0},"end":{"line":27,"column":41}},"22":{"start":{"line":28,"column":0},"end":{"line":28,"column":47}},"23":{"start":{"line":29,"column":17},"end":{"line":29,"column":47}},"24":{"start":{"line":30,"column":11},"end":{"line":30,"column":33}},"25":{"start":{"line":31,"column":0},"end":{"line":37,"column":3}},"26":{"start":{"line":33,"column":4},"end":{"line":33,"column":40}},"27":{"start":{"line":34,"column":4},"end":{"line":36,"column":7}},"28":{"start":{"line":35,"column":8},"end":{"line":35,"column":77}},"29":{"start":{"line":38,"column":0},"end":{"line":38,"column":21}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":56},"end":{"line":2,"column":57}},"loc":{"start":{"line":2,"column":71},"end":{"line":4,"column":1}},"line":2},"1":{"name":"(anonymous_1)","decl":{"start":{"line":24,"column":13},"end":{"line":24,"column":14}},"loc":{"start":{"line":24,"column":27},"end":{"line":26,"column":1}},"line":24},"2":{"name":"(anonymous_2)","decl":{"start":{"line":32,"column":10},"end":{"line":32,"column":11}},"loc":{"start":{"line":32,"column":16},"end":{"line":37,"column":1}},"line":32},"3":{"name":"(anonymous_3)","decl":{"start":{"line":34,"column":21},"end":{"line":34,"column":22}},"loc":{"start":{"line":34,"column":27},"end":{"line":36,"column":5}},"line":34}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":23},"end":{"line":2,"column":27}},{"start":{"line":2,"column":31},"end":{"line":2,"column":51}},{"start":{"line":2,"column":56},"end":{"line":4,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":11},"end":{"line":3,"column":61}},"type":"cond-expr","locations":[{"start":{"line":3,"column":37},"end":{"line":3,"column":40}},{"start":{"line":3,"column":43},"end":{"line":3,"column":61}}],"line":3},"2":{"loc":{"start":{"line":3,"column":12},"end":{"line":3,"column":33}},"type":"binary-expr","locations":[{"start":{"line":3,"column":12},"end":{"line":3,"column":15}},{"start":{"line":3,"column":19},"end":{"line":3,"column":33}}],"line":3}},"s":{"0":1,"1":6,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"11":1,"12":1,"13":1,"14":1,"15":1,"16":1,"17":1,"18":1,"19":1,"20":0,"21":1,"22":1,"23":1,"24":1,"25":1,"26":1,"27":1,"28":1,"29":1},"f":{"0":6,"1":0,"2":1,"3":1},"b":{"0":[1,1,1],"1":[3,3],"2":[6,6]},"inputSourceMap":{"version":3,"file":"E:/react/c04-typescript/backend/src/app.ts","sources":["E:/react/c04-typescript/backend/src/app.ts"],"names":[],"mappings":";;;;;AAAA,sDAA6B;AAC7B,gDAAwB;AACxB,oDAA4B;AAC5B,QAAQ;AACR,qEAA6C;AAC7C,qEAA4C;AAC5C,qEAA4C;AAC5C,oEAA0D;AAC1D,0EAAgE;AAEhE,MAAM,GAAG,GAAG,iBAAO,EAAE,CAAC;AAEtB,cAAc;AACd,GAAG,CAAC,GAAG,CAAC,gBAAM,CAAC,KAAK,CAAC,CAAC,CAAC;AACvB,GAAG,CAAC,GAAG,CAAC,cAAI,EAAE,CAAC,CAAC;AAChB,GAAG,CAAC,GAAG,CAAC,iBAAO,CAAC,UAAU,CAAC,EAAC,QAAQ,EAAE,KAAK,EAAC,CAAC,CAAC,CAAC;AAC/C,GAAG,CAAC,GAAG,CAAC,iBAAO,CAAC,IAAI,EAAE,CAAC,CAAC;AAGxB,GAAG,CAAC,GAAG,CAAC,oBAAU,CAAC,CAAC;AACpB,GAAG,CAAC,GAAG,CAAC,oBAAU,CAAC,CAAC;AACpB,GAAG,CAAC,GAAG,CAAC,oBAAU,CAAC,CAAC;AAEpB,GAAG,CAAC,GAAG,CAAC,GAAG,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,EAAE;IACxB,OAAO,GAAG,CAAC,IAAI,CAAC,kCAAkC,GAAG,CAAC,GAAG,CAAC,MAAM,CAAC,EAAE,CAAC,CAAC;AACvE,CAAC,CAAC,CAAA;AAEF,GAAG,CAAC,GAAG,CAAC,+BAAY,CAAC,CAAC;AACtB,GAAG,CAAC,GAAG,CAAC,qCAAe,CAAC,CAAC;AAEzB,MAAM,EAAC,IAAI,EAAC,GAAG,OAAO,CAAC,qBAAqB,CAAC,CAAA;AAC7C,MAAM,EAAE,GAAG,OAAO,CAAC,aAAa,CAAC,CAAA;AACjC,EAAE,CAAC,OAAO,EAAE;KACT,IAAI,CAAC,GAAG,EAAE;IACT,OAAO,CAAC,GAAG,CAAC,sBAAsB,CAAC,CAAA;IACnC,GAAG,CAAC,MAAM,CAAC,IAAI,EAAE,GAAG,EAAE;QACpB,OAAO,CAAC,GAAG,CAAC,iCAAiC,IAAI,kBAAkB,CAAC,CAAC;IACvE,CAAC,CAAC,CAAC;AACL,CAAC,CAAC,CAAC;AAEL,MAAM,CAAC,OAAO,GAAG,GAAG,CAAC","sourcesContent":["import express from 'express'\r\nimport cors from 'cors';\r\nimport morgan from 'morgan';\r\n//routes\r\nimport noteRoutes from './routes/note.route';\r\nimport userRoutes from './routes/user.route'\r\nimport authRoutes from './routes/auth.route'\r\nimport {errorHandler} from './middleware/error.middleware'\r\nimport {notFoundHandler} from './middleware/notFound.middleware'\r\n\r\nconst app = express();\r\n\r\n// middlewares\r\napp.use(morgan('dev'));\r\napp.use(cors());\r\napp.use(express.urlencoded({extended: false}));\r\napp.use(express.json());\r\n\r\n\r\napp.use(noteRoutes);\r\napp.use(userRoutes);\r\napp.use(authRoutes);\r\n\r\napp.get('/', (req, res) => {\r\n  return res.send(`The API is at http://localhost:${app.get('port')}`);\r\n})\r\n\r\napp.use(errorHandler);\r\napp.use(notFoundHandler);\r\n\r\nconst {PORT} = require('./config/portConfig')\r\nconst db = require('./config/db')\r\ndb.connect()\r\n  .then(() => {\r\n    console.log('database connected..')\r\n    app.listen(PORT, () => {\r\n      console.log(`Listening on http://localhost:${PORT} with typescript`);\r\n    });\r\n  });\r\n\r\nmodule.exports = app;"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"e036c20fbe2fdf6048e82f8445cf06f56e2a4f7b","contentHash":"c234a43e8d358d920bfcb8139ba23dc06262bac9c2bb43a91ae1cecf41381428"},"E:\\react\\c04-typescript\\backend\\src\\routes\\note.route.ts":{"path":"E:\\react\\c04-typescript\\backend\\src\\routes\\note.route.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":18},"end":{"line":3,"column":36}},"2":{"start":{"line":4,"column":26},"end":{"line":4,"column":67}},"3":{"start":{"line":5,"column":15},"end":{"line":5,"column":33}},"4":{"start":{"line":6,"column":0},"end":{"line":6,"column":56}},"5":{"start":{"line":7,"column":0},"end":{"line":7,"column":60}},"6":{"start":{"line":8,"column":0},"end":{"line":8,"column":56}},"7":{"start":{"line":9,"column":0},"end":{"line":9,"column":66}},"8":{"start":{"line":10,"column":0},"end":{"line":10,"column":25}}},"fnMap":{},"branchMap":{},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1},"f":{},"b":{},"inputSourceMap":{"version":3,"file":"E:/react/c04-typescript/backend/src/routes/note.route.ts","sources":["E:/react/c04-typescript/backend/src/routes/note.route.ts"],"names":[],"mappings":";;AAAA,qCAA8B;AAC9B,oEAKuC;AAGvC,MAAM,MAAM,GAAG,gBAAM,EAAE,CAAC;AAExB,MAAM,CAAC,GAAG,CAAC,YAAY,EAAE,6BAAW,CAAC,CAAC;AACtC,MAAM,CAAC,GAAG,CAAC,gBAAgB,EAAE,6BAAW,CAAC,CAAC;AAC1C,MAAM,CAAC,IAAI,CAAC,YAAY,EAAE,4BAAU,CAAC,CAAC;AACtC,MAAM,CAAC,MAAM,CAAC,gBAAgB,EAAE,gCAAc,CAAC,CAAA;AAI/C,kBAAe,MAAM,CAAC","sourcesContent":["import {Router} from 'express'\r\nimport {\r\n  getNoteList,\r\n  createNote,\r\n  getNoteById,\r\n  deleteNoteById,\r\n} from '../controllers/note.controller'\r\n\r\n\r\nconst router = Router();\r\n\r\nrouter.get('/api/notes', getNoteList);\r\nrouter.get('/api/notes/:id', getNoteById);\r\nrouter.post('/api/notes', createNote);\r\nrouter.delete('/api/notes/:id', deleteNoteById)\r\n\r\n\r\n\r\nexport default router;"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"b40d5e83082432157915cbe7253a6d430e9e7adc","contentHash":"efdc0b9adcc3ed5216ad7366466613c7bd4a49f899003cdbed444fef5801e04e"},"E:\\react\\c04-typescript\\backend\\src\\controllers\\note.controller.ts":{"path":"E:\\react\\c04-typescript\\backend\\src\\controllers\\note.controller.ts","statementMap":{"0":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"1":{"start":{"line":3,"column":28},"end":{"line":3,"column":110}},"2":{"start":{"line":3,"column":91},"end":{"line":3,"column":106}},"3":{"start":{"line":4,"column":4},"end":{"line":9,"column":7}},"4":{"start":{"line":5,"column":36},"end":{"line":5,"column":97}},"5":{"start":{"line":5,"column":42},"end":{"line":5,"column":70}},"6":{"start":{"line":5,"column":85},"end":{"line":5,"column":95}},"7":{"start":{"line":6,"column":35},"end":{"line":6,"column":100}},"8":{"start":{"line":6,"column":41},"end":{"line":6,"column":73}},"9":{"start":{"line":6,"column":88},"end":{"line":6,"column":98}},"10":{"start":{"line":7,"column":32},"end":{"line":7,"column":116}},"11":{"start":{"line":8,"column":8},"end":{"line":8,"column":78}},"12":{"start":{"line":11,"column":22},"end":{"line":13,"column":1}},"13":{"start":{"line":12,"column":4},"end":{"line":12,"column":62}},"14":{"start":{"line":14,"column":0},"end":{"line":14,"column":62}},"15":{"start":{"line":15,"column":0},"end":{"line":15,"column":97}},"16":{"start":{"line":16,"column":15},"end":{"line":16,"column":57}},"17":{"start":{"line":17,"column":24},"end":{"line":17,"column":58}},"18":{"start":{"line":18,"column":20},"end":{"line":18,"column":48}},"19":{"start":{"line":19,"column":19},"end":{"line":19,"column":55}},"20":{"start":{"line":20,"column":0},"end":{"line":33,"column":3}},"21":{"start":{"line":20,"column":42},"end":{"line":33,"column":2}},"22":{"start":{"line":21,"column":4},"end":{"line":32,"column":5}},"23":{"start":{"line":22,"column":22},"end":{"line":22,"column":51}},"24":{"start":{"line":23,"column":19},"end":{"line":27,"column":9}},"25":{"start":{"line":28,"column":8},"end":{"line":28,"column":35}},"26":{"start":{"line":31,"column":8},"end":{"line":31,"column":69}},"27":{"start":{"line":34,"column":0},"end":{"line":46,"column":3}},"28":{"start":{"line":34,"column":41},"end":{"line":46,"column":2}},"29":{"start":{"line":35,"column":4},"end":{"line":45,"column":5}},"30":{"start":{"line":36,"column":8},"end":{"line":36,"column":39}},"31":{"start":{"line":37,"column":24},"end":{"line":37,"column":52}},"32":{"start":{"line":38,"column":8},"end":{"line":38,"column":29}},"33":{"start":{"line":39,"column":8},"end":{"line":39,"column":81}},"34":{"start":{"line":44,"column":8},"end":{"line":44,"column":69}},"35":{"start":{"line":47,"column":0},"end":{"line":61,"column":3}},"36":{"start":{"line":47,"column":42},"end":{"line":61,"column":2}},"37":{"start":{"line":48,"column":4},"end":{"line":60,"column":5}},"38":{"start":{"line":49,"column":8},"end":{"line":49,"column":57}},"39":{"start":{"line":50,"column":17},"end":{"line":50,"column":65}},"40":{"start":{"line":51,"column":26},"end":{"line":51,"column":67}},"41":{"start":{"line":52,"column":8},"end":{"line":53,"column":87}},"42":{"start":{"line":53,"column":12},"end":{"line":53,"column":87}},"43":{"start":{"line":54,"column":8},"end":{"line":54,"column":71}},"44":{"start":{"line":59,"column":8},"end":{"line":59,"column":69}},"45":{"start":{"line":62,"column":0},"end":{"line":77,"column":3}},"46":{"start":{"line":62,"column":45},"end":{"line":77,"column":2}},"47":{"start":{"line":63,"column":4},"end":{"line":76,"column":5}},"48":{"start":{"line":64,"column":8},"end":{"line":64,"column":57}},"49":{"start":{"line":65,"column":17},"end":{"line":65,"column":65}},"50":{"start":{"line":66,"column":26},"end":{"line":66,"column":68}},"51":{"start":{"line":68,"column":8},"end":{"line":69,"column":87}},"52":{"start":{"line":69,"column":12},"end":{"line":69,"column":87}},"53":{"start":{"line":70,"column":8},"end":{"line":70,"column":84}},"54":{"start":{"line":75,"column":8},"end":{"line":75,"column":69}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":44},"end":{"line":2,"column":45}},"loc":{"start":{"line":2,"column":89},"end":{"line":10,"column":1}},"line":2},"1":{"name":"adopt","decl":{"start":{"line":3,"column":13},"end":{"line":3,"column":18}},"loc":{"start":{"line":3,"column":26},"end":{"line":3,"column":112}},"line":3},"2":{"name":"(anonymous_2)","decl":{"start":{"line":3,"column":70},"end":{"line":3,"column":71}},"loc":{"start":{"line":3,"column":89},"end":{"line":3,"column":108}},"line":3},"3":{"name":"(anonymous_3)","decl":{"start":{"line":4,"column":36},"end":{"line":4,"column":37}},"loc":{"start":{"line":4,"column":63},"end":{"line":9,"column":5}},"line":4},"4":{"name":"fulfilled","decl":{"start":{"line":5,"column":17},"end":{"line":5,"column":26}},"loc":{"start":{"line":5,"column":34},"end":{"line":5,"column":99}},"line":5},"5":{"name":"rejected","decl":{"start":{"line":6,"column":17},"end":{"line":6,"column":25}},"loc":{"start":{"line":6,"column":33},"end":{"line":6,"column":102}},"line":6},"6":{"name":"step","decl":{"start":{"line":7,"column":17},"end":{"line":7,"column":21}},"loc":{"start":{"line":7,"column":30},"end":{"line":7,"column":118}},"line":7},"7":{"name":"(anonymous_7)","decl":{"start":{"line":11,"column":56},"end":{"line":11,"column":57}},"loc":{"start":{"line":11,"column":71},"end":{"line":13,"column":1}},"line":11},"8":{"name":"(anonymous_8)","decl":{"start":{"line":20,"column":22},"end":{"line":20,"column":23}},"loc":{"start":{"line":20,"column":42},"end":{"line":33,"column":2}},"line":20},"9":{"name":"(anonymous_9)","decl":{"start":{"line":20,"column":76},"end":{"line":20,"column":77}},"loc":{"start":{"line":20,"column":89},"end":{"line":33,"column":1}},"line":20},"10":{"name":"(anonymous_10)","decl":{"start":{"line":34,"column":21},"end":{"line":34,"column":22}},"loc":{"start":{"line":34,"column":41},"end":{"line":46,"column":2}},"line":34},"11":{"name":"(anonymous_11)","decl":{"start":{"line":34,"column":75},"end":{"line":34,"column":76}},"loc":{"start":{"line":34,"column":88},"end":{"line":46,"column":1}},"line":34},"12":{"name":"(anonymous_12)","decl":{"start":{"line":47,"column":22},"end":{"line":47,"column":23}},"loc":{"start":{"line":47,"column":42},"end":{"line":61,"column":2}},"line":47},"13":{"name":"(anonymous_13)","decl":{"start":{"line":47,"column":76},"end":{"line":47,"column":77}},"loc":{"start":{"line":47,"column":89},"end":{"line":61,"column":1}},"line":47},"14":{"name":"(anonymous_14)","decl":{"start":{"line":62,"column":25},"end":{"line":62,"column":26}},"loc":{"start":{"line":62,"column":45},"end":{"line":77,"column":2}},"line":62},"15":{"name":"(anonymous_15)","decl":{"start":{"line":62,"column":79},"end":{"line":62,"column":80}},"loc":{"start":{"line":62,"column":92},"end":{"line":77,"column":1}},"line":62}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":17},"end":{"line":2,"column":21}},{"start":{"line":2,"column":25},"end":{"line":2,"column":39}},{"start":{"line":2,"column":44},"end":{"line":10,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":35},"end":{"line":3,"column":109}},"type":"cond-expr","locations":[{"start":{"line":3,"column":56},"end":{"line":3,"column":61}},{"start":{"line":3,"column":64},"end":{"line":3,"column":109}}],"line":3},"2":{"loc":{"start":{"line":4,"column":16},"end":{"line":4,"column":34}},"type":"binary-expr","locations":[{"start":{"line":4,"column":16},"end":{"line":4,"column":17}},{"start":{"line":4,"column":22},"end":{"line":4,"column":33}}],"line":4},"3":{"loc":{"start":{"line":7,"column":32},"end":{"line":7,"column":115}},"type":"cond-expr","locations":[{"start":{"line":7,"column":46},"end":{"line":7,"column":67}},{"start":{"line":7,"column":70},"end":{"line":7,"column":115}}],"line":7},"4":{"loc":{"start":{"line":8,"column":51},"end":{"line":8,"column":67}},"type":"binary-expr","locations":[{"start":{"line":8,"column":51},"end":{"line":8,"column":61}},{"start":{"line":8,"column":65},"end":{"line":8,"column":67}}],"line":8},"5":{"loc":{"start":{"line":11,"column":22},"end":{"line":13,"column":1}},"type":"binary-expr","locations":[{"start":{"line":11,"column":23},"end":{"line":11,"column":27}},{"start":{"line":11,"column":31},"end":{"line":11,"column":51}},{"start":{"line":11,"column":56},"end":{"line":13,"column":1}}],"line":11},"6":{"loc":{"start":{"line":12,"column":11},"end":{"line":12,"column":61}},"type":"cond-expr","locations":[{"start":{"line":12,"column":37},"end":{"line":12,"column":40}},{"start":{"line":12,"column":43},"end":{"line":12,"column":61}}],"line":12},"7":{"loc":{"start":{"line":12,"column":12},"end":{"line":12,"column":33}},"type":"binary-expr","locations":[{"start":{"line":12,"column":12},"end":{"line":12,"column":15}},{"start":{"line":12,"column":19},"end":{"line":12,"column":33}}],"line":12},"8":{"loc":{"start":{"line":52,"column":8},"end":{"line":53,"column":87}},"type":"if","locations":[{"start":{"line":52,"column":8},"end":{"line":53,"column":87}},{"start":{"line":52,"column":8},"end":{"line":53,"column":87}}],"line":52},"9":{"loc":{"start":{"line":68,"column":8},"end":{"line":69,"column":87}},"type":"if","locations":[{"start":{"line":68,"column":8},"end":{"line":69,"column":87}},{"start":{"line":68,"column":8},"end":{"line":69,"column":87}}],"line":68}},"s":{"0":1,"1":8,"2":7,"3":12,"4":8,"5":8,"6":0,"7":0,"8":0,"9":0,"10":20,"11":12,"12":1,"13":2,"14":1,"15":1,"16":1,"17":1,"18":1,"19":1,"20":1,"21":2,"22":2,"23":2,"24":2,"25":2,"26":0,"27":1,"28":5,"29":5,"30":5,"31":1,"32":1,"33":1,"34":4,"35":1,"36":3,"37":3,"38":3,"39":3,"40":3,"41":3,"42":1,"43":3,"44":0,"45":1,"46":2,"47":2,"48":2,"49":2,"50":2,"51":2,"52":1,"53":2,"54":0},"f":{"0":12,"1":8,"2":7,"3":12,"4":8,"5":0,"6":20,"7":2,"8":2,"9":2,"10":5,"11":5,"12":3,"13":3,"14":2,"15":2},"b":{"0":[1,1,1],"1":[1,7],"2":[12,12],"3":[12,8],"4":[12,12],"5":[1,1,1],"6":[0,2],"7":[2,2],"8":[1,2],"9":[1,1]},"inputSourceMap":{"version":3,"file":"E:/react/c04-typescript/backend/src/controllers/note.controller.ts","sources":["E:/react/c04-typescript/backend/src/controllers/note.controller.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;AACA,0DAAkC;AAIlC,2DAAqD;AACrD,iDAA8D;AAC9D,wDAAgC;AAEnB,QAAA,WAAW,GAAG,CACvB,GAAY,EACZ,GAAa,EACb,IAAkB,EACH,EAAE;IAEjB,IAAG;QACC,MAAM,KAAK,GAAU,MAAM,cAAI,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;QACzC,IAAI,IAAI,GAAG;YACT,MAAM,EAAE,GAAG;YACX,OAAO,EAAE,SAAS;YAClB,IAAI,EAAE,KAAK;SACZ,CAAA;QACD,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;KAC9B;IAAA,OAAM,CAAC,EAAC;QACL,IAAI,CAAC,IAAI,6BAAa,CAAC,CAAC,CAAC,MAAM,EAAC,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC;KAC/C;AAEH,CAAC,CAAA,CAAC;AAGW,QAAA,UAAU,GAAG,CACxB,GAAY,EACZ,GAAa,EACb,IAAkB,EAClB,EAAE;IACA,IAAG;QACD,oBAAQ,CAAC,GAAG,CAAC,IAAI,CAAC,CAAA;QAClB,MAAM,OAAO,GAAS,IAAI,cAAI,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC;QACzC,MAAM,OAAO,CAAC,IAAI,EAAE,CAAC;QACrB,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,EAAC,MAAM,EAAC,GAAG,EAAC,OAAO,EAAC,SAAS,EAAC,IAAI,EAAC,OAAO,EAAC,CAAC,CAAC;KACnE;IAAA,OAAM,CAAC,EAAC;QACP,oCAAoC;QACpC,gBAAgB;QAChB,IAAI,CAAC,IAAI,6BAAa,CAAC,CAAC,CAAC,MAAM,EAAC,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC;KAC7C;AACL,CAAC,CAAA,CAAC;AAGW,QAAA,WAAW,GAAG,CACzB,GAAY,EACZ,GAAa,EACb,IAAkB,EAClB,EAAE;IACA,IAAG;QACD,2BAAe,CAAC,GAAG,CAAC,MAAM,CAAC,EAAE,EAAC,IAAI,CAAC,CAAA;QACnC,IAAI,EAAE,GAAG,kBAAQ,CAAC,KAAK,CAAC,QAAQ,CAAC,GAAG,CAAC,MAAM,CAAC,EAAE,CAAC,CAAC;QAChD,MAAM,SAAS,GAAc,MAAM,cAAI,CAAC,OAAO,CAAC,EAAC,GAAG,EAAE,EAAE,EAAC,CAAC,CAAA;QAC1D,IAAG,SAAS;YACR,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,EAAC,MAAM,EAAC,GAAG,EAAE,OAAO,EAAC,SAAS,EAAE,IAAI,EAAC,SAAS,EAAC,CAAC,CAAC;QAC1E,IAAI,CAAC,IAAI,6BAAa,CAAC,GAAG,EAAC,gBAAgB,CAAC,CAAC,CAAC;KAC/C;IAAA,OAAM,CAAC,EAAC;QACP,oCAAoC;QACpC,gBAAgB;QAChB,IAAI,CAAC,IAAI,6BAAa,CAAC,CAAC,CAAC,MAAM,EAAC,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC;KAC7C;AACL,CAAC,CAAA,CAAC;AAGW,QAAA,cAAc,GAAG,CAC5B,GAAY,EACZ,GAAa,EACb,IAAkB,EAClB,EAAE;IACA,IAAG;QACD,2BAAe,CAAC,GAAG,CAAC,MAAM,CAAC,EAAE,EAAC,IAAI,CAAC,CAAA;QACnC,IAAI,EAAE,GAAG,kBAAQ,CAAC,KAAK,CAAC,QAAQ,CAAC,GAAG,CAAC,MAAM,CAAC,EAAE,CAAC,CAAC;QAChD,MAAM,SAAS,GAAc,MAAM,cAAI,CAAC,iBAAiB,CAAC,EAAE,CAAC,CAAA;QAC7D,wBAAwB;QACxB,IAAG,SAAS;YACR,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,EAAC,MAAM,EAAC,GAAG,EAAE,OAAO,EAAC,SAAS,EAAE,IAAI,EAAC,SAAS,EAAC,CAAC,CAAC;QAC1E,IAAI,CAAC,IAAI,6BAAa,CAAC,GAAG,EAAC,6BAA6B,CAAC,CAAC,CAAC;KAC5D;IAAA,OAAM,CAAC,EAAC;QACP,oCAAoC;QACpC,gBAAgB;QAChB,IAAI,CAAC,IAAI,6BAAa,CAAC,CAAC,CAAC,MAAM,EAAC,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC;KAC7C;AACL,CAAC,CAAA,CAAC","sourcesContent":["import {NextFunction, Request, Response } from \"express\";\r\nimport Note from \"../models/note\";\r\n\r\nimport {INote} from '../interfaces/INote'\r\nimport {INotes} from '../interfaces/INotes'\r\nimport {HttpException} from '../common/HttpException'\r\nimport { validate, validateParamId } from \"./utils/note.util\";\r\nimport mongoose from 'mongoose';\r\n\r\nexport const getNoteList = async (\r\n    req: Request,\r\n    res: Response,\r\n    next: NextFunction\r\n  ): Promise<void> => {\r\n  \r\n    try{\r\n        const notes:INotes = await Note.find({});\r\n        let resp = {\r\n          status: 200,\r\n          message: \"success\",\r\n          data: notes\r\n        }\r\n        res.status(200).json(resp);\r\n    }catch(e){\r\n        next(new HttpException(e.status,e.message));\r\n    } \r\n    \r\n  };\r\n\r\n\r\n  export const createNote = async (\r\n    req: Request,\r\n    res: Response,\r\n    next: NextFunction,\r\n  ) => {\r\n      try{\r\n        validate(req.body)\r\n        const newNote:INote = new Note(req.body);\r\n        await newNote.save();\r\n        res.status(201).json({status:201,message:\"success\",data:newNote});\r\n      }catch(e){\r\n        //console.log(\"this is the catcher\")\r\n        //console.log(e)\r\n        next(new HttpException(e.status,e.message));\r\n      }\r\n  };\r\n\r\n\r\n  export const getNoteById = async (\r\n    req: Request,\r\n    res: Response,\r\n    next: NextFunction,\r\n  ) => {\r\n      try{\r\n        validateParamId(req.params.id,next)\r\n        let id = mongoose.Types.ObjectId(req.params.id);\r\n        const noteFound:INote|null = await Note.findOne({_id: id})\r\n        if(noteFound)\r\n            res.status(200).json({status:200, message:\"success\", data:noteFound});\r\n        next(new HttpException(500,\"Note not Found\"));\r\n      }catch(e){\r\n        //console.log(\"this is the catcher\")\r\n        //console.log(e)\r\n        next(new HttpException(e.status,e.message));\r\n      }\r\n  };\r\n\r\n\r\n  export const deleteNoteById = async (\r\n    req: Request,\r\n    res: Response,\r\n    next: NextFunction,\r\n  ) => {\r\n      try{\r\n        validateParamId(req.params.id,next)\r\n        let id = mongoose.Types.ObjectId(req.params.id);\r\n        const noteFound:INote|null = await Note.findByIdAndRemove(id)\r\n        //console.log(noteFound)\r\n        if(noteFound)\r\n            res.status(200).json({status:200, message:\"success\", data:noteFound});\r\n        next(new HttpException(500,\"Not found element to delete\"));\r\n      }catch(e){\r\n        //console.log(\"this is the catcher\")\r\n        //console.log(e)\r\n        next(new HttpException(e.status,e.message));\r\n      }\r\n  };"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"f59826ce97a32d86f87472e246c63ee388f6edf7","contentHash":"1beb8d87725f241ecbc9a28d9738432b1726887224caba42f5075f5b214d2cc0"},"E:\\react\\c04-typescript\\backend\\src\\models\\note.ts":{"path":"E:\\react\\c04-typescript\\backend\\src\\models\\note.ts","statementMap":{"0":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"1":{"start":{"line":3,"column":4},"end":{"line":3,"column":62}},"2":{"start":{"line":5,"column":19},"end":{"line":5,"column":55}},"3":{"start":{"line":6,"column":19},"end":{"line":15,"column":24}},"4":{"start":{"line":16,"column":0},"end":{"line":16,"column":62}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":56},"end":{"line":2,"column":57}},"loc":{"start":{"line":2,"column":71},"end":{"line":4,"column":1}},"line":2}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":23},"end":{"line":2,"column":27}},{"start":{"line":2,"column":31},"end":{"line":2,"column":51}},{"start":{"line":2,"column":56},"end":{"line":4,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":11},"end":{"line":3,"column":61}},"type":"cond-expr","locations":[{"start":{"line":3,"column":37},"end":{"line":3,"column":40}},{"start":{"line":3,"column":43},"end":{"line":3,"column":61}}],"line":3},"2":{"loc":{"start":{"line":3,"column":12},"end":{"line":3,"column":33}},"type":"binary-expr","locations":[{"start":{"line":3,"column":12},"end":{"line":3,"column":15}},{"start":{"line":3,"column":19},"end":{"line":3,"column":33}}],"line":3}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1},"f":{"0":1},"b":{"0":[1,1,1],"1":[0,1],"2":[1,1]},"inputSourceMap":{"version":3,"file":"E:/react/c04-typescript/backend/src/models/note.ts","sources":["E:/react/c04-typescript/backend/src/models/note.ts"],"names":[],"mappings":";;;;AAAA,wDAAgC;AAGhC,MAAM,UAAU,GAAG,IAAI,kBAAQ,CAAC,MAAM,CAAC;IACrC,IAAI,EAAE;QACJ,IAAI,EAAE,MAAM;QACZ,QAAQ,EAAE,IAAI;KAEf;IACD,QAAQ,EAAE;QACR,IAAI,EAAE,OAAO;QACb,QAAQ,EAAE,IAAI;KACf;CACF,EAAC,EAAG,UAAU,EAAE,IAAI,EAAE,CAAC,CAAC;AAGzB,iBAAS,kBAAQ,CAAC,KAAK,CAAQ,MAAM,EAAE,UAAU,CAAC,CAAC","sourcesContent":["import mongoose from \"mongoose\";\r\nimport {INote} from '../interfaces/INote'\r\n\r\nconst noteSchema = new mongoose.Schema({\r\n  text: {\r\n    type: String,\r\n    required: true,\r\n    \r\n  },\r\n  complete: {\r\n    type: Boolean,\r\n    required: true\r\n  }\r\n},{  timestamps: true });\r\n\r\n\r\nexport = mongoose.model<INote>(\"Note\", noteSchema);\r\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"fc23a9b80fa3f6f182d76f9fa2bedf4d51d897ad","contentHash":"ea31dc733ab3172d473825e54690d5ae851a09a48b31de6309c6185a7ee435b2"},"E:\\react\\c04-typescript\\backend\\src\\common\\HttpException.ts":{"path":"E:\\react\\c04-typescript\\backend\\src\\common\\HttpException.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":31}},"2":{"start":{"line":6,"column":8},"end":{"line":6,"column":23}},"3":{"start":{"line":7,"column":8},"end":{"line":7,"column":33}},"4":{"start":{"line":8,"column":8},"end":{"line":8,"column":31}},"5":{"start":{"line":9,"column":8},"end":{"line":9,"column":47}},"6":{"start":{"line":12,"column":0},"end":{"line":12,"column":38}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":5,"column":4},"end":{"line":5,"column":5}},"loc":{"start":{"line":5,"column":50},"end":{"line":10,"column":5}},"line":5}},"branchMap":{"0":{"loc":{"start":{"line":9,"column":27},"end":{"line":9,"column":46}},"type":"binary-expr","locations":[{"start":{"line":9,"column":27},"end":{"line":9,"column":38}},{"start":{"line":9,"column":42},"end":{"line":9,"column":46}}],"line":9}},"s":{"0":1,"1":1,"2":31,"3":31,"4":31,"5":31,"6":1},"f":{"0":31},"b":{"0":[31,31]},"inputSourceMap":{"version":3,"file":"E:/react/c04-typescript/backend/src/common/HttpException.ts","sources":["E:/react/c04-typescript/backend/src/common/HttpException.ts"],"names":[],"mappings":";;;AAAA,MAAa,aAAc,SAAQ,KAAK;IAKpC,YAAY,UAAkB,EAAE,OAAe,EAAE,WAAoB;QACnE,KAAK,CAAC,OAAO,CAAC,CAAC;QAEf,IAAI,CAAC,MAAM,GAAG,UAAU,CAAC;QACzB,IAAI,CAAC,OAAO,GAAG,OAAO,CAAC;QACvB,IAAI,CAAC,WAAW,GAAG,WAAW,IAAI,IAAI,CAAC;IACzC,CAAC;CACF;AAZH,sCAYG","sourcesContent":["export class HttpException extends Error {\r\n    status: number;\r\n    message: string;\r\n    description: string | null;\r\n  \r\n    constructor(statusCode: number, message: string, description?: string) {\r\n      super(message);\r\n  \r\n      this.status = statusCode;\r\n      this.message = message;\r\n      this.description = description || null;\r\n    }\r\n  }"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"be34db2960e53f2d182e2490786066b29f46eab1","contentHash":"acd867ebf2f3d58714c85d16c0389bc524b5344633bd451b899274f1707ec106"},"E:\\react\\c04-typescript\\backend\\src\\controllers\\utils\\note.util.ts":{"path":"E:\\react\\c04-typescript\\backend\\src\\controllers\\utils\\note.util.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":52}},"2":{"start":{"line":4,"column":24},"end":{"line":4,"column":61}},"3":{"start":{"line":5,"column":0},"end":{"line":15,"column":2}},"4":{"start":{"line":6,"column":18},"end":{"line":6,"column":20}},"5":{"start":{"line":7,"column":4},"end":{"line":12,"column":68}},"6":{"start":{"line":8,"column":8},"end":{"line":8,"column":63}},"7":{"start":{"line":9,"column":9},"end":{"line":12,"column":68}},"8":{"start":{"line":10,"column":8},"end":{"line":10,"column":34}},"9":{"start":{"line":11,"column":9},"end":{"line":12,"column":68}},"10":{"start":{"line":12,"column":8},"end":{"line":12,"column":68}},"11":{"start":{"line":13,"column":4},"end":{"line":14,"column":62}},"12":{"start":{"line":14,"column":8},"end":{"line":14,"column":62}},"13":{"start":{"line":16,"column":0},"end":{"line":21,"column":2}},"14":{"start":{"line":17,"column":19},"end":{"line":17,"column":33}},"15":{"start":{"line":18,"column":4},"end":{"line":20,"column":5}},"16":{"start":{"line":19,"column":8},"end":{"line":19,"column":15}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":5,"column":19},"end":{"line":5,"column":20}},"loc":{"start":{"line":5,"column":29},"end":{"line":15,"column":1}},"line":5},"1":{"name":"(anonymous_1)","decl":{"start":{"line":16,"column":26},"end":{"line":16,"column":27}},"loc":{"start":{"line":16,"column":43},"end":{"line":21,"column":1}},"line":16}},"branchMap":{"0":{"loc":{"start":{"line":7,"column":4},"end":{"line":12,"column":68}},"type":"if","locations":[{"start":{"line":7,"column":4},"end":{"line":12,"column":68}},{"start":{"line":7,"column":4},"end":{"line":12,"column":68}}],"line":7},"1":{"loc":{"start":{"line":7,"column":8},"end":{"line":7,"column":64}},"type":"binary-expr","locations":[{"start":{"line":7,"column":8},"end":{"line":7,"column":31}},{"start":{"line":7,"column":35},"end":{"line":7,"column":64}}],"line":7},"2":{"loc":{"start":{"line":9,"column":9},"end":{"line":12,"column":68}},"type":"if","locations":[{"start":{"line":9,"column":9},"end":{"line":12,"column":68}},{"start":{"line":9,"column":9},"end":{"line":12,"column":68}}],"line":9},"3":{"loc":{"start":{"line":11,"column":9},"end":{"line":12,"column":68}},"type":"if","locations":[{"start":{"line":11,"column":9},"end":{"line":12,"column":68}},{"start":{"line":11,"column":9},"end":{"line":12,"column":68}}],"line":11},"4":{"loc":{"start":{"line":11,"column":13},"end":{"line":11,"column":78}},"type":"binary-expr","locations":[{"start":{"line":11,"column":13},"end":{"line":11,"column":40}},{"start":{"line":11,"column":44},"end":{"line":11,"column":78}}],"line":11},"5":{"loc":{"start":{"line":13,"column":4},"end":{"line":14,"column":62}},"type":"if","locations":[{"start":{"line":13,"column":4},"end":{"line":14,"column":62}},{"start":{"line":13,"column":4},"end":{"line":14,"column":62}}],"line":13},"6":{"loc":{"start":{"line":18,"column":4},"end":{"line":20,"column":5}},"type":"if","locations":[{"start":{"line":18,"column":4},"end":{"line":20,"column":5}},{"start":{"line":18,"column":4},"end":{"line":20,"column":5}}],"line":18}},"s":{"0":1,"1":1,"2":1,"3":1,"4":5,"5":5,"6":1,"7":4,"8":1,"9":3,"10":2,"11":5,"12":4,"13":1,"14":8,"15":8,"16":2},"f":{"0":5,"1":8},"b":{"0":[1,4],"1":[5,4],"2":[1,3],"3":[2,1],"4":[3,2],"5":[4,1],"6":[2,6]},"inputSourceMap":{"version":3,"file":"E:/react/c04-typescript/backend/src/controllers/utils/note.util.ts","sources":["E:/react/c04-typescript/backend/src/controllers/utils/note.util.ts"],"names":[],"mappings":";;;AACA,8DAA0D;AAG7C,QAAA,QAAQ,GAAG,CAAC,IAAmB,EAAM,EAAE;IAChD,IAAI,OAAO,GAAG,EAAE,CAAC;IACjB,IAAG,IAAI,CAAC,IAAI,KAAK,SAAS,IAAI,OAAO,IAAI,CAAC,IAAI,KAAK,QAAQ;QACvD,OAAO,GAAG,4CAA4C,CAAA;SACrD,IAAG,IAAI,CAAC,IAAI,KAAK,EAAE;QACpB,OAAO,GAAG,eAAe,CAAA;SACxB,IAAG,IAAI,CAAC,QAAQ,KAAK,SAAS,IAAI,OAAO,IAAI,CAAC,QAAQ,KAAK,SAAS;QACrE,OAAO,GAAG,iDAAiD,CAAA;IAE/D,IAAG,OAAO,CAAC,MAAM,GAAG,CAAC;QACjB,MAAM,IAAI,6BAAa,CAAC,GAAG,EAAC,OAAO,CAAC,CAAA;AAC5C,CAAC,CAAA;AAEY,QAAA,eAAe,GAAG,CAAC,KAAY,EAAE,IAAkB,EAAC,EAAE;IAC/D,IAAI,QAAQ,GAAW,cAAc,CAAC;IACtC,IAAG,CAAC,QAAQ,CAAC,IAAI,CAAC,KAAK,CAAC,EAAC;QACrB,IAAI,EAAE,CAAC;KACV;AAEL,CAAC,CAAA","sourcesContent":["import { NextFunction } from \"express\";\r\nimport { HttpException } from \"../../common/HttpException\"\r\nimport { INoteValidator} from \"../../interfaces/INote\"\r\n\r\nexport const validate = (body:INoteValidator):void=>{\r\n    let message = \"\";\r\n    if(body.text === undefined || typeof body.text !== \"string\")\r\n        message = \"Text is not type string and it is required\"\r\n    else if(body.text === \"\")\r\n        message = \"Text is empty\"\r\n    else if(body.complete === undefined || typeof body.complete !== \"boolean\")\r\n        message = \"Complete is not type boolean and it is required\"\r\n          \r\n    if(message.length > 0)\r\n        throw new HttpException(422,message)\r\n}\r\n\r\nexport const validateParamId = (param:string, next: NextFunction)=>{\r\n    let idFilter: RegExp = /[0-9a-f]{24}/;\r\n    if(!idFilter.test(param)){\r\n        next();\r\n    }\r\n        \r\n}"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"780ea8b170865bbaa365ee21fd72f5bb09ae4aa4","contentHash":"e33b1d934dc4d3c620ac4ba61563063c40079606cd741935ae5467aa57d70dd5"},"E:\\react\\c04-typescript\\backend\\src\\routes\\user.route.ts":{"path":"E:\\react\\c04-typescript\\backend\\src\\routes\\user.route.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":18},"end":{"line":3,"column":36}},"2":{"start":{"line":4,"column":26},"end":{"line":4,"column":67}},"3":{"start":{"line":5,"column":15},"end":{"line":5,"column":33}},"4":{"start":{"line":6,"column":0},"end":{"line":6,"column":55}},"5":{"start":{"line":7,"column":0},"end":{"line":7,"column":59}},"6":{"start":{"line":8,"column":0},"end":{"line":8,"column":55}},"7":{"start":{"line":9,"column":0},"end":{"line":9,"column":25}}},"fnMap":{},"branchMap":{},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1},"f":{},"b":{},"inputSourceMap":{"version":3,"file":"E:/react/c04-typescript/backend/src/routes/user.route.ts","sources":["E:/react/c04-typescript/backend/src/routes/user.route.ts"],"names":[],"mappings":";;AAAA,qCAA8B;AAC9B,oEAKyC;AAEzC,MAAM,MAAM,GAAG,gBAAM,EAAE,CAAC;AAExB,MAAM,CAAC,GAAG,CAAC,WAAW,EAAE,6BAAW,CAAC,CAAC;AACrC,MAAM,CAAC,GAAG,CAAC,eAAe,EAAE,6BAAW,CAAC,CAAC;AACzC,MAAM,CAAC,IAAI,CAAC,WAAW,EAAE,4BAAU,CAAC,CAAC;AAErC,kBAAe,MAAM,CAAC","sourcesContent":["import {Router} from 'express'\r\nimport { \r\n    getUserList, \r\n    createUser,\r\n    getUserById\r\n  \r\n  } from '../controllers/user.controller'\r\n\r\nconst router = Router();\r\n\r\nrouter.get('/api/user', getUserList);\r\nrouter.get('/api/user/:id', getUserById);\r\nrouter.post('/api/user', createUser);\r\n\r\nexport default router;"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"31123253acdfcdabae6d17cae4d690c34794b842","contentHash":"acd2256de938eb07c124803db4f7b58866666f3ea8b52e97c165638cc3eb8ed3"},"E:\\react\\c04-typescript\\backend\\src\\controllers\\user.controller.ts":{"path":"E:\\react\\c04-typescript\\backend\\src\\controllers\\user.controller.ts","statementMap":{"0":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"1":{"start":{"line":3,"column":28},"end":{"line":3,"column":110}},"2":{"start":{"line":3,"column":91},"end":{"line":3,"column":106}},"3":{"start":{"line":4,"column":4},"end":{"line":9,"column":7}},"4":{"start":{"line":5,"column":36},"end":{"line":5,"column":97}},"5":{"start":{"line":5,"column":42},"end":{"line":5,"column":70}},"6":{"start":{"line":5,"column":85},"end":{"line":5,"column":95}},"7":{"start":{"line":6,"column":35},"end":{"line":6,"column":100}},"8":{"start":{"line":6,"column":41},"end":{"line":6,"column":73}},"9":{"start":{"line":6,"column":88},"end":{"line":6,"column":98}},"10":{"start":{"line":7,"column":32},"end":{"line":7,"column":116}},"11":{"start":{"line":8,"column":8},"end":{"line":8,"column":78}},"12":{"start":{"line":11,"column":22},"end":{"line":13,"column":1}},"13":{"start":{"line":12,"column":4},"end":{"line":12,"column":62}},"14":{"start":{"line":14,"column":0},"end":{"line":14,"column":62}},"15":{"start":{"line":15,"column":0},"end":{"line":15,"column":72}},"16":{"start":{"line":16,"column":19},"end":{"line":16,"column":55}},"17":{"start":{"line":17,"column":24},"end":{"line":17,"column":58}},"18":{"start":{"line":18,"column":15},"end":{"line":18,"column":57}},"19":{"start":{"line":19,"column":20},"end":{"line":19,"column":48}},"20":{"start":{"line":20,"column":20},"end":{"line":20,"column":48}},"21":{"start":{"line":21,"column":0},"end":{"line":34,"column":3}},"22":{"start":{"line":21,"column":42},"end":{"line":34,"column":2}},"23":{"start":{"line":22,"column":4},"end":{"line":33,"column":5}},"24":{"start":{"line":23,"column":22},"end":{"line":23,"column":51}},"25":{"start":{"line":24,"column":19},"end":{"line":28,"column":9}},"26":{"start":{"line":29,"column":8},"end":{"line":29,"column":35}},"27":{"start":{"line":32,"column":8},"end":{"line":32,"column":69}},"28":{"start":{"line":35,"column":0},"end":{"line":45,"column":3}},"29":{"start":{"line":35,"column":41},"end":{"line":45,"column":2}},"30":{"start":{"line":36,"column":4},"end":{"line":44,"column":5}},"31":{"start":{"line":37,"column":8},"end":{"line":37,"column":39}},"32":{"start":{"line":38,"column":22},"end":{"line":38,"column":50}},"33":{"start":{"line":39,"column":8},"end":{"line":39,"column":29}},"34":{"start":{"line":40,"column":8},"end":{"line":40,"column":81}},"35":{"start":{"line":43,"column":8},"end":{"line":43,"column":69}},"36":{"start":{"line":46,"column":0},"end":{"line":60,"column":3}},"37":{"start":{"line":46,"column":42},"end":{"line":60,"column":2}},"38":{"start":{"line":47,"column":4},"end":{"line":59,"column":5}},"39":{"start":{"line":48,"column":8},"end":{"line":48,"column":57}},"40":{"start":{"line":49,"column":17},"end":{"line":49,"column":65}},"41":{"start":{"line":50,"column":26},"end":{"line":50,"column":67}},"42":{"start":{"line":51,"column":8},"end":{"line":52,"column":87}},"43":{"start":{"line":52,"column":12},"end":{"line":52,"column":87}},"44":{"start":{"line":53,"column":8},"end":{"line":53,"column":71}},"45":{"start":{"line":58,"column":8},"end":{"line":58,"column":69}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":44},"end":{"line":2,"column":45}},"loc":{"start":{"line":2,"column":89},"end":{"line":10,"column":1}},"line":2},"1":{"name":"adopt","decl":{"start":{"line":3,"column":13},"end":{"line":3,"column":18}},"loc":{"start":{"line":3,"column":26},"end":{"line":3,"column":112}},"line":3},"2":{"name":"(anonymous_2)","decl":{"start":{"line":3,"column":70},"end":{"line":3,"column":71}},"loc":{"start":{"line":3,"column":89},"end":{"line":3,"column":108}},"line":3},"3":{"name":"(anonymous_3)","decl":{"start":{"line":4,"column":36},"end":{"line":4,"column":37}},"loc":{"start":{"line":4,"column":63},"end":{"line":9,"column":5}},"line":4},"4":{"name":"fulfilled","decl":{"start":{"line":5,"column":17},"end":{"line":5,"column":26}},"loc":{"start":{"line":5,"column":34},"end":{"line":5,"column":99}},"line":5},"5":{"name":"rejected","decl":{"start":{"line":6,"column":17},"end":{"line":6,"column":25}},"loc":{"start":{"line":6,"column":33},"end":{"line":6,"column":102}},"line":6},"6":{"name":"step","decl":{"start":{"line":7,"column":17},"end":{"line":7,"column":21}},"loc":{"start":{"line":7,"column":30},"end":{"line":7,"column":118}},"line":7},"7":{"name":"(anonymous_7)","decl":{"start":{"line":11,"column":56},"end":{"line":11,"column":57}},"loc":{"start":{"line":11,"column":71},"end":{"line":13,"column":1}},"line":11},"8":{"name":"(anonymous_8)","decl":{"start":{"line":21,"column":22},"end":{"line":21,"column":23}},"loc":{"start":{"line":21,"column":42},"end":{"line":34,"column":2}},"line":21},"9":{"name":"(anonymous_9)","decl":{"start":{"line":21,"column":76},"end":{"line":21,"column":77}},"loc":{"start":{"line":21,"column":89},"end":{"line":34,"column":1}},"line":21},"10":{"name":"(anonymous_10)","decl":{"start":{"line":35,"column":21},"end":{"line":35,"column":22}},"loc":{"start":{"line":35,"column":41},"end":{"line":45,"column":2}},"line":35},"11":{"name":"(anonymous_11)","decl":{"start":{"line":35,"column":75},"end":{"line":35,"column":76}},"loc":{"start":{"line":35,"column":88},"end":{"line":45,"column":1}},"line":35},"12":{"name":"(anonymous_12)","decl":{"start":{"line":46,"column":22},"end":{"line":46,"column":23}},"loc":{"start":{"line":46,"column":42},"end":{"line":60,"column":2}},"line":46},"13":{"name":"(anonymous_13)","decl":{"start":{"line":46,"column":76},"end":{"line":46,"column":77}},"loc":{"start":{"line":46,"column":89},"end":{"line":60,"column":1}},"line":46}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":17},"end":{"line":2,"column":21}},{"start":{"line":2,"column":25},"end":{"line":2,"column":39}},{"start":{"line":2,"column":44},"end":{"line":10,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":35},"end":{"line":3,"column":109}},"type":"cond-expr","locations":[{"start":{"line":3,"column":56},"end":{"line":3,"column":61}},{"start":{"line":3,"column":64},"end":{"line":3,"column":109}}],"line":3},"2":{"loc":{"start":{"line":4,"column":16},"end":{"line":4,"column":34}},"type":"binary-expr","locations":[{"start":{"line":4,"column":16},"end":{"line":4,"column":17}},{"start":{"line":4,"column":22},"end":{"line":4,"column":33}}],"line":4},"3":{"loc":{"start":{"line":7,"column":32},"end":{"line":7,"column":115}},"type":"cond-expr","locations":[{"start":{"line":7,"column":46},"end":{"line":7,"column":67}},{"start":{"line":7,"column":70},"end":{"line":7,"column":115}}],"line":7},"4":{"loc":{"start":{"line":8,"column":51},"end":{"line":8,"column":67}},"type":"binary-expr","locations":[{"start":{"line":8,"column":51},"end":{"line":8,"column":61}},{"start":{"line":8,"column":65},"end":{"line":8,"column":67}}],"line":8},"5":{"loc":{"start":{"line":11,"column":22},"end":{"line":13,"column":1}},"type":"binary-expr","locations":[{"start":{"line":11,"column":23},"end":{"line":11,"column":27}},{"start":{"line":11,"column":31},"end":{"line":11,"column":51}},{"start":{"line":11,"column":56},"end":{"line":13,"column":1}}],"line":11},"6":{"loc":{"start":{"line":12,"column":11},"end":{"line":12,"column":61}},"type":"cond-expr","locations":[{"start":{"line":12,"column":37},"end":{"line":12,"column":40}},{"start":{"line":12,"column":43},"end":{"line":12,"column":61}}],"line":12},"7":{"loc":{"start":{"line":12,"column":12},"end":{"line":12,"column":33}},"type":"binary-expr","locations":[{"start":{"line":12,"column":12},"end":{"line":12,"column":15}},{"start":{"line":12,"column":19},"end":{"line":12,"column":33}}],"line":12},"8":{"loc":{"start":{"line":51,"column":8},"end":{"line":52,"column":87}},"type":"if","locations":[{"start":{"line":51,"column":8},"end":{"line":52,"column":87}},{"start":{"line":51,"column":8},"end":{"line":52,"column":87}}],"line":51}},"s":{"0":1,"1":6,"2":5,"3":10,"4":6,"5":6,"6":0,"7":0,"8":0,"9":0,"10":16,"11":10,"12":1,"13":2,"14":1,"15":1,"16":1,"17":1,"18":1,"19":1,"20":1,"21":1,"22":2,"23":2,"24":2,"25":2,"26":2,"27":0,"28":1,"29":5,"30":5,"31":5,"32":1,"33":1,"34":1,"35":4,"36":1,"37":3,"38":3,"39":3,"40":3,"41":3,"42":3,"43":1,"44":3,"45":0},"f":{"0":10,"1":6,"2":5,"3":10,"4":6,"5":0,"6":16,"7":2,"8":2,"9":2,"10":5,"11":5,"12":3,"13":3},"b":{"0":[1,1,1],"1":[1,5],"2":[10,10],"3":[10,6],"4":[10,10],"5":[1,1,1],"6":[0,2],"7":[2,2],"8":[1,2]},"inputSourceMap":{"version":3,"file":"E:/react/c04-typescript/backend/src/controllers/user.controller.ts","sources":["E:/react/c04-typescript/backend/src/controllers/user.controller.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;AAAA,wDAA+B;AAE/B,2DAAwD;AAGxD,0DAAiC;AACjC,iDAAoD;AACpD,iDAA6C;AAEhC,QAAA,WAAW,GAAG,CACvB,GAAY,EACZ,GAAa,EACb,IAAkB,EACH,EAAE;IAEjB,IAAG;QACC,MAAM,KAAK,GAAU,MAAM,cAAI,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;QACzC,IAAI,IAAI,GAAG;YACT,MAAM,EAAE,GAAG;YACX,OAAO,EAAE,SAAS;YAClB,IAAI,EAAE,KAAK;SACZ,CAAA;QACD,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;KAC9B;IAAA,OAAM,CAAC,EAAC;QACL,IAAI,CAAC,IAAI,6BAAa,CAAC,CAAC,CAAC,MAAM,EAAC,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC;KAC/C;AAEH,CAAC,CAAA,CAAC;AAEW,QAAA,UAAU,GAAG,CACxB,GAAY,EACZ,GAAa,EACb,IAAkB,EACH,EAAE;IAEjB,IAAG;QACC,oBAAQ,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC;QACnB,IAAI,OAAO,GAAS,IAAI,cAAI,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC;QACvC,MAAM,OAAO,CAAC,IAAI,EAAE,CAAC;QACrB,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,EAAC,MAAM,EAAC,GAAG,EAAC,OAAO,EAAC,SAAS,EAAC,IAAI,EAAC,OAAO,EAAC,CAAC,CAAC;KACrE;IAAA,OAAM,CAAC,EAAC;QACL,IAAI,CAAC,IAAI,6BAAa,CAAC,CAAC,CAAC,MAAM,EAAC,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC;KAC/C;AAEH,CAAC,CAAA,CAAC;AAEW,QAAA,WAAW,GAAG,CACzB,GAAY,EACZ,GAAa,EACb,IAAkB,EAClB,EAAE;IACA,IAAG;QACD,2BAAe,CAAC,GAAG,CAAC,MAAM,CAAC,EAAE,EAAC,IAAI,CAAC,CAAA;QACnC,IAAI,EAAE,GAAG,kBAAQ,CAAC,KAAK,CAAC,QAAQ,CAAC,GAAG,CAAC,MAAM,CAAC,EAAE,CAAC,CAAC;QAChD,MAAM,SAAS,GAAc,MAAM,cAAI,CAAC,OAAO,CAAC,EAAC,GAAG,EAAE,EAAE,EAAC,CAAC,CAAA;QAC1D,IAAG,SAAS;YACR,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,EAAC,MAAM,EAAC,GAAG,EAAE,OAAO,EAAC,SAAS,EAAE,IAAI,EAAC,SAAS,EAAC,CAAC,CAAC;QAC1E,IAAI,CAAC,IAAI,6BAAa,CAAC,GAAG,EAAC,gBAAgB,CAAC,CAAC,CAAC;KAC/C;IAAA,OAAM,CAAC,EAAC;QACP,oCAAoC;QACpC,gBAAgB;QAChB,IAAI,CAAC,IAAI,6BAAa,CAAC,CAAC,CAAC,MAAM,EAAC,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC;KAC7C;AACL,CAAC,CAAA,CAAC","sourcesContent":["import mongoose from 'mongoose'\r\nimport { NextFunction, Response, Request} from 'express'\r\nimport { HttpException } from '../common/HttpException';\r\nimport { IUser } from '../interfaces/IUser';\r\nimport { IUsers } from '../interfaces/IUsers';\r\nimport User from '../models/user'\r\nimport { validateParamId } from './utils/note.util';\r\nimport { validate } from './utils/user.util';\r\n\r\nexport const getUserList = async (\r\n    req: Request,\r\n    res: Response,\r\n    next: NextFunction\r\n  ): Promise<void> => {\r\n  \r\n    try{\r\n        const users:IUsers = await User.find({});\r\n        let resp = {\r\n          status: 200,\r\n          message: \"success\",\r\n          data: users\r\n        }\r\n        res.status(200).json(resp);\r\n    }catch(e){\r\n        next(new HttpException(e.status,e.message));\r\n    } \r\n    \r\n  };\r\n\r\n  export const createUser = async (\r\n    req: Request,\r\n    res: Response,\r\n    next: NextFunction\r\n  ): Promise<void> => {\r\n  \r\n    try{\r\n        validate(req.body);\r\n        let newUser:IUser = new User(req.body);\r\n        await newUser.save();\r\n        res.status(201).json({status:201,message:\"success\",data:newUser});\r\n    }catch(e){\r\n        next(new HttpException(e.status,e.message));\r\n    } \r\n    \r\n  };\r\n\r\n  export const getUserById = async (\r\n    req: Request,\r\n    res: Response,\r\n    next: NextFunction,\r\n  ) => {\r\n      try{\r\n        validateParamId(req.params.id,next)\r\n        let id = mongoose.Types.ObjectId(req.params.id);\r\n        const userFound:IUser|null = await User.findOne({_id: id})\r\n        if(userFound)\r\n            res.status(200).json({status:200, message:\"success\", data:userFound});\r\n        next(new HttpException(500,\"User not Found\"));\r\n      }catch(e){\r\n        //console.log(\"this is the catcher\")\r\n        //console.log(e)\r\n        next(new HttpException(e.status,e.message));\r\n      }\r\n  };"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"45a084947d3d89714f41b937f87c2cf1b29e2f5c","contentHash":"59cd5c10ac21f8855c26530b7f96f4bbe345adbd9252a8b1c37abbda5633cae0"},"E:\\react\\c04-typescript\\backend\\src\\models\\user.ts":{"path":"E:\\react\\c04-typescript\\backend\\src\\models\\user.ts","statementMap":{"0":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"1":{"start":{"line":3,"column":28},"end":{"line":3,"column":110}},"2":{"start":{"line":3,"column":91},"end":{"line":3,"column":106}},"3":{"start":{"line":4,"column":4},"end":{"line":9,"column":7}},"4":{"start":{"line":5,"column":36},"end":{"line":5,"column":97}},"5":{"start":{"line":5,"column":42},"end":{"line":5,"column":70}},"6":{"start":{"line":5,"column":85},"end":{"line":5,"column":95}},"7":{"start":{"line":6,"column":35},"end":{"line":6,"column":100}},"8":{"start":{"line":6,"column":41},"end":{"line":6,"column":73}},"9":{"start":{"line":6,"column":88},"end":{"line":6,"column":98}},"10":{"start":{"line":7,"column":32},"end":{"line":7,"column":116}},"11":{"start":{"line":8,"column":8},"end":{"line":8,"column":78}},"12":{"start":{"line":11,"column":22},"end":{"line":13,"column":1}},"13":{"start":{"line":12,"column":4},"end":{"line":12,"column":62}},"14":{"start":{"line":14,"column":19},"end":{"line":14,"column":55}},"15":{"start":{"line":15,"column":24},"end":{"line":15,"column":58}},"16":{"start":{"line":16,"column":15},"end":{"line":16,"column":40}},"17":{"start":{"line":18,"column":15},"end":{"line":18,"column":34}},"18":{"start":{"line":19,"column":19},"end":{"line":43,"column":24}},"19":{"start":{"line":44,"column":0},"end":{"line":57,"column":3}},"20":{"start":{"line":45,"column":4},"end":{"line":56,"column":7}},"21":{"start":{"line":47,"column":8},"end":{"line":55,"column":9}},"22":{"start":{"line":48,"column":12},"end":{"line":50,"column":13}},"23":{"start":{"line":49,"column":16},"end":{"line":49,"column":68}},"24":{"start":{"line":51,"column":12},"end":{"line":51,"column":19}},"25":{"start":{"line":54,"column":12},"end":{"line":54,"column":73}},"26":{"start":{"line":58,"column":0},"end":{"line":58,"column":62}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":44},"end":{"line":2,"column":45}},"loc":{"start":{"line":2,"column":89},"end":{"line":10,"column":1}},"line":2},"1":{"name":"adopt","decl":{"start":{"line":3,"column":13},"end":{"line":3,"column":18}},"loc":{"start":{"line":3,"column":26},"end":{"line":3,"column":112}},"line":3},"2":{"name":"(anonymous_2)","decl":{"start":{"line":3,"column":70},"end":{"line":3,"column":71}},"loc":{"start":{"line":3,"column":89},"end":{"line":3,"column":108}},"line":3},"3":{"name":"(anonymous_3)","decl":{"start":{"line":4,"column":36},"end":{"line":4,"column":37}},"loc":{"start":{"line":4,"column":63},"end":{"line":9,"column":5}},"line":4},"4":{"name":"fulfilled","decl":{"start":{"line":5,"column":17},"end":{"line":5,"column":26}},"loc":{"start":{"line":5,"column":34},"end":{"line":5,"column":99}},"line":5},"5":{"name":"rejected","decl":{"start":{"line":6,"column":17},"end":{"line":6,"column":25}},"loc":{"start":{"line":6,"column":33},"end":{"line":6,"column":102}},"line":6},"6":{"name":"step","decl":{"start":{"line":7,"column":17},"end":{"line":7,"column":21}},"loc":{"start":{"line":7,"column":30},"end":{"line":7,"column":118}},"line":7},"7":{"name":"(anonymous_7)","decl":{"start":{"line":11,"column":56},"end":{"line":11,"column":57}},"loc":{"start":{"line":11,"column":71},"end":{"line":13,"column":1}},"line":11},"8":{"name":"(anonymous_8)","decl":{"start":{"line":44,"column":23},"end":{"line":44,"column":24}},"loc":{"start":{"line":44,"column":39},"end":{"line":57,"column":1}},"line":44},"9":{"name":"(anonymous_9)","decl":{"start":{"line":45,"column":43},"end":{"line":45,"column":44}},"loc":{"start":{"line":45,"column":56},"end":{"line":56,"column":5}},"line":45}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":17},"end":{"line":2,"column":21}},{"start":{"line":2,"column":25},"end":{"line":2,"column":39}},{"start":{"line":2,"column":44},"end":{"line":10,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":35},"end":{"line":3,"column":109}},"type":"cond-expr","locations":[{"start":{"line":3,"column":56},"end":{"line":3,"column":61}},{"start":{"line":3,"column":64},"end":{"line":3,"column":109}}],"line":3},"2":{"loc":{"start":{"line":4,"column":16},"end":{"line":4,"column":34}},"type":"binary-expr","locations":[{"start":{"line":4,"column":16},"end":{"line":4,"column":17}},{"start":{"line":4,"column":22},"end":{"line":4,"column":33}}],"line":4},"3":{"loc":{"start":{"line":7,"column":32},"end":{"line":7,"column":115}},"type":"cond-expr","locations":[{"start":{"line":7,"column":46},"end":{"line":7,"column":67}},{"start":{"line":7,"column":70},"end":{"line":7,"column":115}}],"line":7},"4":{"loc":{"start":{"line":8,"column":51},"end":{"line":8,"column":67}},"type":"binary-expr","locations":[{"start":{"line":8,"column":51},"end":{"line":8,"column":61}},{"start":{"line":8,"column":65},"end":{"line":8,"column":67}}],"line":8},"5":{"loc":{"start":{"line":11,"column":22},"end":{"line":13,"column":1}},"type":"binary-expr","locations":[{"start":{"line":11,"column":23},"end":{"line":11,"column":27}},{"start":{"line":11,"column":31},"end":{"line":11,"column":51}},{"start":{"line":11,"column":56},"end":{"line":13,"column":1}}],"line":11},"6":{"loc":{"start":{"line":12,"column":11},"end":{"line":12,"column":61}},"type":"cond-expr","locations":[{"start":{"line":12,"column":37},"end":{"line":12,"column":40}},{"start":{"line":12,"column":43},"end":{"line":12,"column":61}}],"line":12},"7":{"loc":{"start":{"line":12,"column":12},"end":{"line":12,"column":33}},"type":"binary-expr","locations":[{"start":{"line":12,"column":12},"end":{"line":12,"column":15}},{"start":{"line":12,"column":19},"end":{"line":12,"column":33}}],"line":12},"8":{"loc":{"start":{"line":48,"column":12},"end":{"line":50,"column":13}},"type":"if","locations":[{"start":{"line":48,"column":12},"end":{"line":50,"column":13}},{"start":{"line":48,"column":12},"end":{"line":50,"column":13}}],"line":48}},"s":{"0":1,"1":5,"2":0,"3":8,"4":5,"5":5,"6":0,"7":0,"8":0,"9":0,"10":13,"11":8,"12":1,"13":1,"14":1,"15":1,"16":1,"17":1,"18":1,"19":1,"20":8,"21":8,"22":8,"23":5,"24":8,"25":0,"26":1},"f":{"0":8,"1":5,"2":0,"3":8,"4":5,"5":0,"6":13,"7":1,"8":8,"9":8},"b":{"0":[1,1,1],"1":[5,0],"2":[8,8],"3":[8,5],"4":[8,8],"5":[1,1,1],"6":[0,1],"7":[1,1],"8":[5,3]},"inputSourceMap":{"version":3,"file":"E:/react/c04-typescript/backend/src/models/user.ts","sources":["E:/react/c04-typescript/backend/src/models/user.ts"],"names":[],"mappings":";;;;;;;;;;;;;AAAA,wDAAgC;AAIhC,2DAAwD;AACxD,yCAA0E;AAC1E,wCAAwC;AACxC,MAAM,MAAM,GAAG,OAAO,CAAC,UAAU,CAAC,CAAA;AAGlC,MAAM,UAAU,GAAG,IAAI,kBAAQ,CAAC,MAAM,CAAC;IACnC,IAAI,EAAE;QACF,IAAI,EAAE,MAAM;QACZ,QAAQ,EAAE,IAAI;QACd,IAAI,EAAE,IAAI;QACV,SAAS,EAAE,wBAAiB;KAC/B;IACD,KAAK,EAAE;QACH,IAAI,EAAE,MAAM;QACZ,QAAQ,EAAE,IAAI;QACd,MAAM,EAAE,IAAI;QACZ,SAAS,EAAE,IAAI;KAClB;IACD,QAAQ,EAAE;QACN,IAAI,EAAE,MAAM;QACZ,QAAQ,EAAE,IAAI;QACd,SAAS,EAAE,4BAAqB;KACnC;IACD,MAAM,EAAE,CAAC;YACL,KAAK,EAAE;gBACH,IAAI,EAAE,MAAM;gBACZ,QAAQ,EAAE,IAAI;aACjB;SACJ,CAAC;CACL,EAAE,EAAG,UAAU,EAAE,IAAI,EAAE,CAAC,CAAA;AAGzB,UAAU,CAAC,GAAG,CAAQ,MAAM,EAAE,UAAe,IAAI;;QAC7C,iDAAiD;QAEjD,IAAG;YACC,IAAI,IAAI,CAAC,UAAU,CAAC,UAAU,CAAC,EAAE;gBAC7B,IAAI,CAAC,QAAQ,GAAG,MAAM,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,QAAQ,EAAE,CAAC,CAAC,CAAA;aACtD;YACD,IAAI,EAAE,CAAA;SACT;QAAA,OAAM,CAAC,EAAC;YACL,IAAI,CAAC,IAAI,6BAAa,CAAC,CAAC,CAAC,MAAM,EAAE,CAAC,CAAC,OAAO,CAAC,CAAC,CAAA;SAC/C;IAEL,CAAC;CAAA,CAAC,CAAA;AAuBF,iBAAS,kBAAQ,CAAC,KAAK,CAAQ,MAAM,EAAE,UAAU,CAAC,CAAA","sourcesContent":["import mongoose from 'mongoose';\r\nimport { NextFunction } from \"express\";\r\nimport {IUser} from '../interfaces/IUser';\r\nimport { errorHandler } from '../middleware/error.middleware';\r\nimport { HttpException } from '../common/HttpException';\r\nimport { USER_NAME_MINIMUM, USER_PASSWORD_MINIMUM } from '../config/util';\r\n//const validator = require('validator')\r\nconst bcrypt = require('bcryptjs')\r\n\r\n\r\nconst userSchema = new mongoose.Schema({\r\n    name: {\r\n        type: String,\r\n        required: true,\r\n        trim: true,\r\n        minLength: USER_NAME_MINIMUM\r\n    },\r\n    email: {\r\n        type: String,\r\n        required: true,\r\n        unique: true,\r\n        lowercase: true\r\n    },\r\n    password: {\r\n        type: String,\r\n        required: true,\r\n        minLength: USER_PASSWORD_MINIMUM\r\n    },\r\n    tokens: [{\r\n        token: {\r\n            type: String,\r\n            required: true\r\n        }\r\n    }]\r\n}, {  timestamps: true })\r\n\r\n\r\nuserSchema.pre<IUser>('save', async function(next){\r\n    // Hash the password before saving the user model\r\n    \r\n    try{\r\n        if (this.isModified('password')) {\r\n            this.password = await bcrypt.hash(this.password, 8)\r\n        }\r\n        next()\r\n    }catch(e){\r\n        next(new HttpException(e.status, e.message))\r\n    }\r\n    \r\n})\r\n/*\r\n\r\nuserSchema.methods.generateAuthToken = async function() {\r\n    // Generate an auth token for the user\r\n    console.log(\"generate toke method\")\r\n    const user = this\r\n    //console.log(user)\r\n    //check this --> const token = jwt.sign({user}, process.env.JWT_KEY)\r\n    const token = await jwt.sign({_id:user._id}, 'secret')\r\n   \r\n    user.tokens = user.tokens.concat({token})\r\n    await user.save()\r\n    console.log(token)\r\n    return token\r\n\r\n}\r\n*/\r\n\r\n\r\n\r\n\r\n\r\nexport = mongoose.model<IUser>('User', userSchema)\r\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"ef84ddc5613ffbe4e0c5e462751d7aa532b69ff1","contentHash":"95f32f9a2980ba39c251a5634665c028270f3bccbb8a860f32e578634e383500"},"E:\\react\\c04-typescript\\backend\\src\\config\\util.ts":{"path":"E:\\react\\c04-typescript\\backend\\src\\config\\util.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":67}},"2":{"start":{"line":4,"column":0},"end":{"line":4,"column":34}},"3":{"start":{"line":5,"column":0},"end":{"line":5,"column":30}}},"fnMap":{},"branchMap":{},"s":{"0":1,"1":1,"2":1,"3":1},"f":{},"b":{},"inputSourceMap":{"version":3,"file":"E:/react/c04-typescript/backend/src/config/util.ts","sources":["E:/react/c04-typescript/backend/src/config/util.ts"],"names":[],"mappings":";;;AAAa,QAAA,qBAAqB,GAAG,CAAC,CAAC;AAC1B,QAAA,iBAAiB,GAAG,CAAC,CAAC","sourcesContent":["export const USER_PASSWORD_MINIMUM = 3;\r\nexport const USER_NAME_MINIMUM = 2;"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"fa73bf97c718afe6f9357f2936c7f3df3b50769e","contentHash":"7a7eb3bfe07735fe66fc23e1813592c5a6d70a6ed4113c80a060c07745235c7e"},"E:\\react\\c04-typescript\\backend\\src\\controllers\\utils\\user.util.ts":{"path":"E:\\react\\c04-typescript\\backend\\src\\controllers\\utils\\user.util.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":112}},"2":{"start":{"line":4,"column":24},"end":{"line":4,"column":61}},"3":{"start":{"line":5,"column":15},"end":{"line":5,"column":43}},"4":{"start":{"line":7,"column":0},"end":{"line":17,"column":2}},"5":{"start":{"line":8,"column":20},"end":{"line":8,"column":55}},"6":{"start":{"line":9,"column":21},"end":{"line":9,"column":58}},"7":{"start":{"line":10,"column":24},"end":{"line":10,"column":67}},"8":{"start":{"line":11,"column":4},"end":{"line":12,"column":64}},"9":{"start":{"line":12,"column":8},"end":{"line":12,"column":64}},"10":{"start":{"line":13,"column":4},"end":{"line":14,"column":65}},"11":{"start":{"line":14,"column":8},"end":{"line":14,"column":65}},"12":{"start":{"line":15,"column":4},"end":{"line":16,"column":68}},"13":{"start":{"line":16,"column":8},"end":{"line":16,"column":68}},"14":{"start":{"line":18,"column":0},"end":{"line":23,"column":2}},"15":{"start":{"line":19,"column":4},"end":{"line":22,"column":18}},"16":{"start":{"line":20,"column":8},"end":{"line":20,"column":71}},"17":{"start":{"line":22,"column":8},"end":{"line":22,"column":18}},"18":{"start":{"line":24,"column":0},"end":{"line":29,"column":2}},"19":{"start":{"line":25,"column":4},"end":{"line":28,"column":18}},"20":{"start":{"line":26,"column":8},"end":{"line":26,"column":32}},"21":{"start":{"line":28,"column":8},"end":{"line":28,"column":18}},"22":{"start":{"line":30,"column":0},"end":{"line":35,"column":2}},"23":{"start":{"line":31,"column":4},"end":{"line":34,"column":18}},"24":{"start":{"line":32,"column":8},"end":{"line":32,"column":76}},"25":{"start":{"line":34,"column":8},"end":{"line":34,"column":18}},"26":{"start":{"line":36,"column":21},"end":{"line":41,"column":1}},"27":{"start":{"line":37,"column":4},"end":{"line":40,"column":21}},"28":{"start":{"line":38,"column":8},"end":{"line":38,"column":20}},"29":{"start":{"line":40,"column":8},"end":{"line":40,"column":21}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":7,"column":19},"end":{"line":7,"column":20}},"loc":{"start":{"line":7,"column":29},"end":{"line":17,"column":1}},"line":7},"1":{"name":"(anonymous_1)","decl":{"start":{"line":18,"column":27},"end":{"line":18,"column":28}},"loc":{"start":{"line":18,"column":37},"end":{"line":23,"column":1}},"line":18},"2":{"name":"(anonymous_2)","decl":{"start":{"line":24,"column":28},"end":{"line":24,"column":29}},"loc":{"start":{"line":24,"column":39},"end":{"line":29,"column":1}},"line":24},"3":{"name":"(anonymous_3)","decl":{"start":{"line":30,"column":31},"end":{"line":30,"column":32}},"loc":{"start":{"line":30,"column":45},"end":{"line":35,"column":1}},"line":30},"4":{"name":"(anonymous_4)","decl":{"start":{"line":36,"column":21},"end":{"line":36,"column":22}},"loc":{"start":{"line":36,"column":32},"end":{"line":41,"column":1}},"line":36}},"branchMap":{"0":{"loc":{"start":{"line":11,"column":4},"end":{"line":12,"column":64}},"type":"if","locations":[{"start":{"line":11,"column":4},"end":{"line":12,"column":64}},{"start":{"line":11,"column":4},"end":{"line":12,"column":64}}],"line":11},"1":{"loc":{"start":{"line":13,"column":4},"end":{"line":14,"column":65}},"type":"if","locations":[{"start":{"line":13,"column":4},"end":{"line":14,"column":65}},{"start":{"line":13,"column":4},"end":{"line":14,"column":65}}],"line":13},"2":{"loc":{"start":{"line":15,"column":4},"end":{"line":16,"column":68}},"type":"if","locations":[{"start":{"line":15,"column":4},"end":{"line":16,"column":68}},{"start":{"line":15,"column":4},"end":{"line":16,"column":68}}],"line":15},"3":{"loc":{"start":{"line":19,"column":4},"end":{"line":22,"column":18}},"type":"if","locations":[{"start":{"line":19,"column":4},"end":{"line":22,"column":18}},{"start":{"line":19,"column":4},"end":{"line":22,"column":18}}],"line":19},"4":{"loc":{"start":{"line":19,"column":8},"end":{"line":19,"column":112}},"type":"binary-expr","locations":[{"start":{"line":19,"column":8},"end":{"line":19,"column":26}},{"start":{"line":19,"column":30},"end":{"line":19,"column":54}},{"start":{"line":19,"column":58},"end":{"line":19,"column":112}}],"line":19},"5":{"loc":{"start":{"line":25,"column":4},"end":{"line":28,"column":18}},"type":"if","locations":[{"start":{"line":25,"column":4},"end":{"line":28,"column":18}},{"start":{"line":25,"column":4},"end":{"line":28,"column":18}}],"line":25},"6":{"loc":{"start":{"line":25,"column":8},"end":{"line":25,"column":80}},"type":"binary-expr","locations":[{"start":{"line":25,"column":8},"end":{"line":25,"column":27}},{"start":{"line":25,"column":31},"end":{"line":25,"column":56}},{"start":{"line":25,"column":60},"end":{"line":25,"column":80}}],"line":25},"7":{"loc":{"start":{"line":31,"column":4},"end":{"line":34,"column":18}},"type":"if","locations":[{"start":{"line":31,"column":4},"end":{"line":34,"column":18}},{"start":{"line":31,"column":4},"end":{"line":34,"column":18}}],"line":31},"8":{"loc":{"start":{"line":31,"column":8},"end":{"line":31,"column":128}},"type":"binary-expr","locations":[{"start":{"line":31,"column":8},"end":{"line":31,"column":30}},{"start":{"line":31,"column":34},"end":{"line":31,"column":62}},{"start":{"line":31,"column":66},"end":{"line":31,"column":128}}],"line":31},"9":{"loc":{"start":{"line":37,"column":4},"end":{"line":40,"column":21}},"type":"if","locations":[{"start":{"line":37,"column":4},"end":{"line":40,"column":21}},{"start":{"line":37,"column":4},"end":{"line":40,"column":21}}],"line":37}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":5,"6":5,"7":5,"8":5,"9":3,"10":2,"11":0,"12":2,"13":1,"14":1,"15":5,"16":3,"17":2,"18":1,"19":9,"20":0,"21":9,"22":1,"23":9,"24":2,"25":7,"26":1,"27":9,"28":9,"29":0},"f":{"0":5,"1":5,"2":9,"3":9,"4":9},"b":{"0":[3,2],"1":[0,2],"2":[1,1],"3":[3,2],"4":[5,4,3],"5":[0,9],"6":[9,9,9],"7":[2,7],"8":[9,8,7],"9":[9,0]},"inputSourceMap":{"version":3,"file":"E:/react/c04-typescript/backend/src/controllers/utils/user.util.ts","sources":["E:/react/c04-typescript/backend/src/controllers/utils/user.util.ts"],"names":[],"mappings":";;;AACA,8DAA0D;AAC1D,4CAA6E;AAE7E,6BAA6B;AAEhB,QAAA,QAAQ,GAAG,CAAC,IAAmB,EAAM,EAAE;IAChD,IAAI,SAAS,GAAG,wBAAgB,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;IAC5C,IAAI,UAAU,GAAG,yBAAiB,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;IAC/C,IAAI,aAAa,GAAG,4BAAoB,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;IACxD,IAAG,SAAS;QACR,MAAM,IAAI,6BAAa,CAAC,GAAG,EAAC,SAAS,CAAC,CAAA;IAC1C,IAAG,UAAU;QACT,MAAM,IAAI,6BAAa,CAAC,GAAG,EAAC,UAAU,CAAC,CAAA;IAC3C,IAAG,aAAa;QACZ,MAAM,IAAI,6BAAa,CAAC,GAAG,EAAC,aAAa,CAAC,CAAA;AAClD,CAAC,CAAA;AAEY,QAAA,gBAAgB,GAAG,CAAC,IAAW,EAAC,EAAE;IAC3C,IAAG,IAAI,KAAK,SAAS,IAAI,OAAO,IAAI,KAAK,QAAQ,IAAI,MAAM,CAAC,IAAI,CAAC,CAAC,IAAI,EAAE,CAAC,MAAM,IAAI,wBAAiB;QAChG,OAAO,4BAA4B,GAAG,wBAAiB,CAAC;;QAExD,OAAO,EAAE,CAAC;AAClB,CAAC,CAAA;AAEY,QAAA,iBAAiB,GAAG,CAAC,KAAY,EAAC,EAAE;IAC7C,IAAG,KAAK,KAAK,SAAS,IAAI,OAAO,KAAK,KAAK,QAAQ,IAAI,CAAC,YAAY,CAAC,KAAK,CAAC;QACvE,OAAO,gBAAgB,CAAA;;QAEvB,OAAO,EAAE,CAAA;AACjB,CAAC,CAAA;AAEY,QAAA,oBAAoB,GAAG,CAAC,QAAe,EAAC,EAAE;IACnD,IAAG,QAAQ,KAAK,SAAS,IAAI,OAAO,QAAQ,KAAK,QAAQ,IAAI,MAAM,CAAC,QAAQ,CAAC,CAAC,IAAI,EAAE,CAAC,MAAM,IAAI,4BAAqB;QAChH,OAAO,6BAA6B,GAAG,4BAAqB,CAAA;;QAE5D,OAAO,EAAE,CAAA;AACjB,CAAC,CAAA;AAED,MAAM,YAAY,GAAG,CAAC,KAAY,EAAC,EAAE;IACjC,IAAG,4BAA4B,CAAC,IAAI,CAAC,KAAK,CAAC;QACvC,OAAO,IAAI,CAAC;;QAEZ,OAAO,KAAK,CAAC;AACrB,CAAC,CAAA;AAED;;;;;;;;GAQG","sourcesContent":["\r\nimport { HttpException } from \"../../common/HttpException\"\r\nimport { USER_NAME_MINIMUM, USER_PASSWORD_MINIMUM } from \"../../config/util\";\r\nimport { IUserValidator } from \"../../interfaces/IUser\";\r\n//import bcrypt from 'bcrypt'\r\n\r\nexport const validate = (body:IUserValidator):void=>{\r\n    let errorName = validateUserName(body.name);\r\n    let errorEmail = validateUserEmail(body.email);\r\n    let errorPassword = validateUserPassword(body.password);\r\n    if(errorName)\r\n        throw new HttpException(422,errorName)\r\n    if(errorEmail)\r\n        throw new HttpException(422,errorEmail)\r\n    if(errorPassword)\r\n        throw new HttpException(422,errorPassword)\r\n}\r\n\r\nexport const validateUserName = (name:string)=>{\r\n    if(name === undefined || typeof name !== 'string' || String(name).trim().length <= USER_NAME_MINIMUM)\r\n        return \"Minimum length of name is \" + USER_NAME_MINIMUM;\r\n    else \r\n        return \"\";\r\n}\r\n\r\nexport const validateUserEmail = (email:string)=>{\r\n    if(email === undefined || typeof email !== 'string' || !emailAcepted(email))\r\n        return \"email is wrong\"  \r\n    else\r\n        return \"\"\r\n}\r\n\r\nexport const validateUserPassword = (password:string)=>{\r\n    if(password === undefined || typeof password !== 'string' || String(password).trim().length <= USER_PASSWORD_MINIMUM)\r\n        return \"Mimimum password length is \" + USER_PASSWORD_MINIMUM  \r\n    else\r\n        return \"\"\r\n}\r\n\r\nconst emailAcepted = (email:string)=>{\r\n    if(/^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/.test(email))    \r\n        return true;\r\n    else\r\n        return false;\r\n}\r\n\r\n/*\r\nexport const hidePassword = async (user:IUser) =>{\r\n    try{\r\n            user.password = await bcrypt.hash(user.password, 8)\r\n            return user;\r\n    }catch(e){\r\n        throw(new HttpException(e.status,e.message));\r\n    }\r\n}*/"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"5af607d8fc0273c13567ad685f8c30612651ef39","contentHash":"99274020a4ba902559ed078f695ef3ffc8d6ac0acd4adae207253348c89cef14"},"E:\\react\\c04-typescript\\backend\\src\\routes\\auth.route.ts":{"path":"E:\\react\\c04-typescript\\backend\\src\\routes\\auth.route.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":18},"end":{"line":3,"column":36}},"2":{"start":{"line":4,"column":26},"end":{"line":4,"column":67}},"3":{"start":{"line":5,"column":26},"end":{"line":5,"column":66}},"4":{"start":{"line":6,"column":15},"end":{"line":6,"column":33}},"5":{"start":{"line":7,"column":0},"end":{"line":7,"column":55}},"6":{"start":{"line":8,"column":0},"end":{"line":8,"column":81}},"7":{"start":{"line":9,"column":0},"end":{"line":9,"column":25}}},"fnMap":{},"branchMap":{},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1},"f":{},"b":{},"inputSourceMap":{"version":3,"file":"E:/react/c04-typescript/backend/src/routes/auth.route.ts","sources":["E:/react/c04-typescript/backend/src/routes/auth.route.ts"],"names":[],"mappings":";;AAAA,qCAA8B;AAC9B,oEAGyC;AACzC,mEAAkD;AAElD,MAAM,MAAM,GAAG,gBAAM,EAAE,CAAC;AAExB,MAAM,CAAC,IAAI,CAAC,YAAY,EAAE,2BAAS,CAAC,CAAC;AACrC,MAAM,CAAC,IAAI,CAAC,aAAa,EAAE,sBAAI,EAAE,4BAAU,CAAC,CAAC;AAE7C,kBAAe,MAAM,CAAC","sourcesContent":["import {Router} from 'express'\r\nimport { \r\n    loginUser,\r\n    logoutUser\r\n  } from '../controllers/auth.controller'\r\nimport {auth} from '../middleware/auth.middleware'\r\n\r\nconst router = Router();\r\n\r\nrouter.post('/api/login', loginUser);\r\nrouter.post('/api/logout', auth, logoutUser);\r\n\r\nexport default router;"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"5bbf15796e6fd908fe77c4f637b334fe6c8a6c0f","contentHash":"7782c765fa338ebf5934503d90e7074f6fbe33e934797391c7915af927c5d28c"},"E:\\react\\c04-typescript\\backend\\src\\controllers\\auth.controller.ts":{"path":"E:\\react\\c04-typescript\\backend\\src\\controllers\\auth.controller.ts","statementMap":{"0":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"1":{"start":{"line":3,"column":28},"end":{"line":3,"column":110}},"2":{"start":{"line":3,"column":91},"end":{"line":3,"column":106}},"3":{"start":{"line":4,"column":4},"end":{"line":9,"column":7}},"4":{"start":{"line":5,"column":36},"end":{"line":5,"column":97}},"5":{"start":{"line":5,"column":42},"end":{"line":5,"column":70}},"6":{"start":{"line":5,"column":85},"end":{"line":5,"column":95}},"7":{"start":{"line":6,"column":35},"end":{"line":6,"column":100}},"8":{"start":{"line":6,"column":41},"end":{"line":6,"column":73}},"9":{"start":{"line":6,"column":88},"end":{"line":6,"column":98}},"10":{"start":{"line":7,"column":32},"end":{"line":7,"column":116}},"11":{"start":{"line":8,"column":8},"end":{"line":8,"column":78}},"12":{"start":{"line":11,"column":22},"end":{"line":13,"column":1}},"13":{"start":{"line":12,"column":4},"end":{"line":12,"column":62}},"14":{"start":{"line":14,"column":0},"end":{"line":14,"column":62}},"15":{"start":{"line":15,"column":0},"end":{"line":15,"column":48}},"16":{"start":{"line":16,"column":20},"end":{"line":16,"column":48}},"17":{"start":{"line":17,"column":15},"end":{"line":17,"column":57}},"18":{"start":{"line":18,"column":24},"end":{"line":18,"column":58}},"19":{"start":{"line":19,"column":19},"end":{"line":19,"column":55}},"20":{"start":{"line":20,"column":0},"end":{"line":51,"column":3}},"21":{"start":{"line":20,"column":40},"end":{"line":51,"column":2}},"22":{"start":{"line":21,"column":4},"end":{"line":50,"column":5}},"23":{"start":{"line":23,"column":8},"end":{"line":23,"column":44}},"24":{"start":{"line":24,"column":8},"end":{"line":24,"column":37}},"25":{"start":{"line":25,"column":26},"end":{"line":25,"column":81}},"26":{"start":{"line":26,"column":8},"end":{"line":46,"column":9}},"27":{"start":{"line":27,"column":36},"end":{"line":27,"column":107}},"28":{"start":{"line":29,"column":12},"end":{"line":30,"column":84}},"29":{"start":{"line":30,"column":16},"end":{"line":30,"column":84}},"30":{"start":{"line":31,"column":30},"end":{"line":31,"column":86}},"31":{"start":{"line":32,"column":12},"end":{"line":33,"column":83}},"32":{"start":{"line":33,"column":16},"end":{"line":33,"column":83}},"33":{"start":{"line":34,"column":23},"end":{"line":41,"column":13}},"34":{"start":{"line":42,"column":12},"end":{"line":42,"column":39}},"35":{"start":{"line":45,"column":12},"end":{"line":45,"column":75}},"36":{"start":{"line":49,"column":8},"end":{"line":49,"column":69}},"37":{"start":{"line":52,"column":0},"end":{"line":71,"column":3}},"38":{"start":{"line":52,"column":41},"end":{"line":71,"column":2}},"39":{"start":{"line":53,"column":4},"end":{"line":70,"column":5}},"40":{"start":{"line":55,"column":26},"end":{"line":55,"column":47}},"41":{"start":{"line":56,"column":26},"end":{"line":56,"column":42}},"42":{"start":{"line":57,"column":8},"end":{"line":59,"column":11}},"43":{"start":{"line":58,"column":12},"end":{"line":58,"column":44}},"44":{"start":{"line":60,"column":8},"end":{"line":60,"column":31}},"45":{"start":{"line":61,"column":21},"end":{"line":65,"column":9}},"46":{"start":{"line":66,"column":8},"end":{"line":66,"column":35}},"47":{"start":{"line":69,"column":8},"end":{"line":69,"column":69}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":44},"end":{"line":2,"column":45}},"loc":{"start":{"line":2,"column":89},"end":{"line":10,"column":1}},"line":2},"1":{"name":"adopt","decl":{"start":{"line":3,"column":13},"end":{"line":3,"column":18}},"loc":{"start":{"line":3,"column":26},"end":{"line":3,"column":112}},"line":3},"2":{"name":"(anonymous_2)","decl":{"start":{"line":3,"column":70},"end":{"line":3,"column":71}},"loc":{"start":{"line":3,"column":89},"end":{"line":3,"column":108}},"line":3},"3":{"name":"(anonymous_3)","decl":{"start":{"line":4,"column":36},"end":{"line":4,"column":37}},"loc":{"start":{"line":4,"column":63},"end":{"line":9,"column":5}},"line":4},"4":{"name":"fulfilled","decl":{"start":{"line":5,"column":17},"end":{"line":5,"column":26}},"loc":{"start":{"line":5,"column":34},"end":{"line":5,"column":99}},"line":5},"5":{"name":"rejected","decl":{"start":{"line":6,"column":17},"end":{"line":6,"column":25}},"loc":{"start":{"line":6,"column":33},"end":{"line":6,"column":102}},"line":6},"6":{"name":"step","decl":{"start":{"line":7,"column":17},"end":{"line":7,"column":21}},"loc":{"start":{"line":7,"column":30},"end":{"line":7,"column":118}},"line":7},"7":{"name":"(anonymous_7)","decl":{"start":{"line":11,"column":56},"end":{"line":11,"column":57}},"loc":{"start":{"line":11,"column":71},"end":{"line":13,"column":1}},"line":11},"8":{"name":"(anonymous_8)","decl":{"start":{"line":20,"column":20},"end":{"line":20,"column":21}},"loc":{"start":{"line":20,"column":40},"end":{"line":51,"column":2}},"line":20},"9":{"name":"(anonymous_9)","decl":{"start":{"line":20,"column":74},"end":{"line":20,"column":75}},"loc":{"start":{"line":20,"column":87},"end":{"line":51,"column":1}},"line":20},"10":{"name":"(anonymous_10)","decl":{"start":{"line":52,"column":21},"end":{"line":52,"column":22}},"loc":{"start":{"line":52,"column":41},"end":{"line":71,"column":2}},"line":52},"11":{"name":"(anonymous_11)","decl":{"start":{"line":52,"column":75},"end":{"line":52,"column":76}},"loc":{"start":{"line":52,"column":88},"end":{"line":71,"column":1}},"line":52},"12":{"name":"(anonymous_12)","decl":{"start":{"line":57,"column":51},"end":{"line":57,"column":52}},"loc":{"start":{"line":57,"column":61},"end":{"line":59,"column":9}},"line":57}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":17},"end":{"line":2,"column":21}},{"start":{"line":2,"column":25},"end":{"line":2,"column":39}},{"start":{"line":2,"column":44},"end":{"line":10,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":35},"end":{"line":3,"column":109}},"type":"cond-expr","locations":[{"start":{"line":3,"column":56},"end":{"line":3,"column":61}},{"start":{"line":3,"column":64},"end":{"line":3,"column":109}}],"line":3},"2":{"loc":{"start":{"line":4,"column":16},"end":{"line":4,"column":34}},"type":"binary-expr","locations":[{"start":{"line":4,"column":16},"end":{"line":4,"column":17}},{"start":{"line":4,"column":22},"end":{"line":4,"column":33}}],"line":4},"3":{"loc":{"start":{"line":7,"column":32},"end":{"line":7,"column":115}},"type":"cond-expr","locations":[{"start":{"line":7,"column":46},"end":{"line":7,"column":67}},{"start":{"line":7,"column":70},"end":{"line":7,"column":115}}],"line":7},"4":{"loc":{"start":{"line":8,"column":51},"end":{"line":8,"column":67}},"type":"binary-expr","locations":[{"start":{"line":8,"column":51},"end":{"line":8,"column":61}},{"start":{"line":8,"column":65},"end":{"line":8,"column":67}}],"line":8},"5":{"loc":{"start":{"line":11,"column":22},"end":{"line":13,"column":1}},"type":"binary-expr","locations":[{"start":{"line":11,"column":23},"end":{"line":11,"column":27}},{"start":{"line":11,"column":31},"end":{"line":11,"column":51}},{"start":{"line":11,"column":56},"end":{"line":13,"column":1}}],"line":11},"6":{"loc":{"start":{"line":12,"column":11},"end":{"line":12,"column":61}},"type":"cond-expr","locations":[{"start":{"line":12,"column":37},"end":{"line":12,"column":40}},{"start":{"line":12,"column":43},"end":{"line":12,"column":61}}],"line":12},"7":{"loc":{"start":{"line":12,"column":12},"end":{"line":12,"column":33}},"type":"binary-expr","locations":[{"start":{"line":12,"column":12},"end":{"line":12,"column":15}},{"start":{"line":12,"column":19},"end":{"line":12,"column":33}}],"line":12},"8":{"loc":{"start":{"line":26,"column":8},"end":{"line":46,"column":9}},"type":"if","locations":[{"start":{"line":26,"column":8},"end":{"line":46,"column":9}},{"start":{"line":26,"column":8},"end":{"line":46,"column":9}}],"line":26},"9":{"loc":{"start":{"line":29,"column":12},"end":{"line":30,"column":84}},"type":"if","locations":[{"start":{"line":29,"column":12},"end":{"line":30,"column":84}},{"start":{"line":29,"column":12},"end":{"line":30,"column":84}}],"line":29},"10":{"loc":{"start":{"line":31,"column":30},"end":{"line":31,"column":86}},"type":"binary-expr","locations":[{"start":{"line":31,"column":31},"end":{"line":31,"column":79}},{"start":{"line":31,"column":84},"end":{"line":31,"column":86}}],"line":31},"11":{"loc":{"start":{"line":32,"column":12},"end":{"line":33,"column":83}},"type":"if","locations":[{"start":{"line":32,"column":12},"end":{"line":33,"column":83}},{"start":{"line":32,"column":12},"end":{"line":33,"column":83}}],"line":32}},"s":{"0":1,"1":8,"2":3,"3":5,"4":8,"5":8,"6":0,"7":0,"8":0,"9":0,"10":13,"11":5,"12":1,"13":2,"14":1,"15":1,"16":1,"17":1,"18":1,"19":1,"20":1,"21":4,"22":4,"23":4,"24":3,"25":3,"26":3,"27":2,"28":2,"29":1,"30":2,"31":2,"32":0,"33":2,"34":2,"35":1,"36":2,"37":1,"38":1,"39":1,"40":1,"41":1,"42":1,"43":1,"44":1,"45":1,"46":1,"47":0},"f":{"0":5,"1":8,"2":3,"3":5,"4":8,"5":0,"6":13,"7":2,"8":4,"9":4,"10":1,"11":1,"12":1},"b":{"0":[1,1,1],"1":[5,3],"2":[5,5],"3":[5,8],"4":[5,5],"5":[1,1,1],"6":[0,2],"7":[2,2],"8":[2,1],"9":[1,1],"10":[2,0],"11":[0,2]},"inputSourceMap":{"version":3,"file":"E:/react/c04-typescript/backend/src/controllers/auth.controller.ts","sources":["E:/react/c04-typescript/backend/src/controllers/auth.controller.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;AACA,iDAAiE;AACjE,0DAAiC;AACjC,2DAAwD;AACxD,wDAA6B;AAEhB,QAAA,SAAS,GAAG,CACrB,GAAY,EACZ,GAAa,EACb,IAAkB,EACH,EAAE;IAEjB,IAAG;QACC,kBAAkB;QAClB,yBAAa,CAAE,GAAG,CAAC,IAAI,CAAE,CAAA;QACzB,OAAO,CAAC,GAAG,CAAC,eAAe,CAAC,CAAA;QAC5B,MAAM,SAAS,GAAG,MAAM,cAAI,CAAC,OAAO,CAAC,EAAE,KAAK,EAAC,GAAG,CAAC,IAAI,CAAC,KAAK,EAAE,CAAE,CAAA;QAC/D,IAAG,SAAS,EAAC;YACT,MAAM,eAAe,GAAG,MAAM,kBAAM,CAAC,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,QAAQ,EAAE,SAAS,CAAC,QAAQ,CAAC,CAAC;YACpF,qCAAqC;YACtC,IAAG,CAAC,eAAe;gBACd,IAAI,CAAC,IAAI,6BAAa,CAAC,GAAG,EAAC,qBAAqB,CAAC,CAAC,CAAA;YAEtD,MAAM,SAAS,GAAG,CAAA,MAAM,yBAAa,CAAC,SAAS,EAAC,IAAI,CAAC,KAAI,EAAE,CAAC;YAE5D,IAAG,SAAS,KAAK,EAAE;gBACf,IAAI,CAAC,IAAI,6BAAa,CAAC,GAAG,EAAC,oBAAoB,CAAC,CAAC,CAAA;YAErD,IAAI,IAAI,GAAG;gBACP,MAAM,EAAE,GAAG;gBACX,OAAO,EAAE,SAAS;gBAClB,IAAI,EAAE;oBACF,IAAI,EAAC,SAAS;oBACd,KAAK,EAAC,SAAS;iBAClB;aACF,CAAA;YACH,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;SAC9B;aAAI;YACD,IAAI,CAAC,IAAI,6BAAa,CAAC,GAAG,EAAC,gBAAgB,CAAC,CAAC,CAAA;SAChD;KAEJ;IAAA,OAAM,CAAC,EAAC;QACL,IAAI,CAAC,IAAI,6BAAa,CAAC,CAAC,CAAC,MAAM,EAAE,CAAC,CAAC,OAAO,CAAC,CAAC,CAAA;KAC/C;AAEH,CAAC,CAAA,CAAC;AAGW,QAAA,UAAU,GAAG,CACxB,GAAY,EACZ,GAAa,EACb,IAAkB,EACH,EAAE;IAEjB,IAAG;QACC,sBAAsB;QACtB,MAAM,SAAS,GAAG,GAAG,CAAC,MAAM,CAAC,UAAU,CAAC;QACxC,MAAM,SAAS,GAAG,GAAG,CAAC,MAAM,CAAC,KAAK,CAAC;QAEnC,SAAS,CAAC,MAAM,GAAG,SAAS,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC,IAAQ,EAAE,EAAE;YACpD,OAAO,IAAI,CAAC,KAAK,KAAK,SAAS,CAAA;QACnC,CAAC,CAAC,CAAA;QACF,MAAM,SAAS,CAAC,IAAI,EAAE,CAAA;QACtB,MAAM,IAAI,GAAG;YACT,MAAM,EAAE,GAAG;YACX,OAAO,EAAE,SAAS;YAClB,IAAI,EAAE,SAAS;SAClB,CAAA;QACD,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAA;KAC7B;IAAA,OAAM,CAAC,EAAC;QACL,IAAI,CAAC,IAAI,6BAAa,CAAC,CAAC,CAAC,MAAM,EAAE,CAAC,CAAC,OAAO,CAAC,CAAC,CAAA;KAC/C;AAEH,CAAC,CAAA,CAAC","sourcesContent":["import { NextFunction, Request, Response } from \"express\";\r\nimport { generateToken, validateLogin } from \"./utils/auth.util\";\r\nimport User from \"../models/user\"\r\nimport { HttpException } from \"../common/HttpException\";\r\nimport bcrypt from 'bcryptjs'\r\n\r\nexport const loginUser = async (\r\n    req: Request,\r\n    res: Response,\r\n    next: NextFunction\r\n  ): Promise<void> => {\r\n  \r\n    try{\r\n        //console.log(req)\r\n        validateLogin( req.body )\r\n        console.log(\"service login\")\r\n        const userFound = await User.findOne({ email:req.body.email } )\r\n        if(userFound){\r\n            const isPasswordMatch = await bcrypt.compare(req.body.password, userFound.password);\r\n            //await User.saveAuthToken(userFound)\r\n           if(!isPasswordMatch)\r\n                next(new HttpException(422,\"invalid credentials\"))\r\n            \r\n            const userToken = await generateToken(userFound,next) || \"\";\r\n            \r\n            if(userToken === \"\")\r\n                next(new HttpException(500,\"No token generated\"))\r\n\r\n            let resp = {\r\n                status: 200,\r\n                message: \"success\",\r\n                data: {\r\n                    user:userFound,\r\n                    token:userToken\r\n                }\r\n              }\r\n            res.status(200).json(resp);\r\n        }else{\r\n            next(new HttpException(500,\"user not found\"))\r\n        }\r\n          \r\n    }catch(e){\r\n        next(new HttpException(e.status, e.message))\r\n    }       \r\n    \r\n  };\r\n\r\n\r\n  export const logoutUser = async (\r\n    req: Request,\r\n    res: Response,\r\n    next: NextFunction\r\n  ): Promise<void> => {\r\n  \r\n    try{\r\n        //req.user, req.token \r\n        const foundUser = res.locals.jwtPayload;\r\n        const tokenUser = res.locals.token;\r\n\r\n        foundUser.tokens = foundUser.tokens.filter((item:any) => {\r\n            return item.token !== tokenUser\r\n        })\r\n        await foundUser.save()\r\n        const resp = {\r\n            status: 200,\r\n            message: \"success\",\r\n            data: foundUser\r\n        }\r\n        res.status(200).json(resp)\r\n    }catch(e){\r\n        next(new HttpException(e.status, e.message))\r\n    }       \r\n    \r\n  };\r\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"0ef5392f72c6443879949b263db919e7ef89098d","contentHash":"ad5291b3e9a057b229f4851ce5775533926bdc085af3c94171aee2ddacad761f"},"E:\\react\\c04-typescript\\backend\\src\\controllers\\utils\\auth.util.ts":{"path":"E:\\react\\c04-typescript\\backend\\src\\controllers\\utils\\auth.util.ts","statementMap":{"0":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"1":{"start":{"line":3,"column":28},"end":{"line":3,"column":110}},"2":{"start":{"line":3,"column":91},"end":{"line":3,"column":106}},"3":{"start":{"line":4,"column":4},"end":{"line":9,"column":7}},"4":{"start":{"line":5,"column":36},"end":{"line":5,"column":97}},"5":{"start":{"line":5,"column":42},"end":{"line":5,"column":70}},"6":{"start":{"line":5,"column":85},"end":{"line":5,"column":95}},"7":{"start":{"line":6,"column":35},"end":{"line":6,"column":100}},"8":{"start":{"line":6,"column":41},"end":{"line":6,"column":73}},"9":{"start":{"line":6,"column":88},"end":{"line":6,"column":98}},"10":{"start":{"line":7,"column":32},"end":{"line":7,"column":116}},"11":{"start":{"line":8,"column":8},"end":{"line":8,"column":78}},"12":{"start":{"line":11,"column":22},"end":{"line":13,"column":1}},"13":{"start":{"line":12,"column":4},"end":{"line":12,"column":62}},"14":{"start":{"line":14,"column":0},"end":{"line":14,"column":62}},"15":{"start":{"line":15,"column":0},"end":{"line":15,"column":55}},"16":{"start":{"line":16,"column":24},"end":{"line":16,"column":61}},"17":{"start":{"line":17,"column":20},"end":{"line":17,"column":42}},"18":{"start":{"line":18,"column":20},"end":{"line":18,"column":70}},"19":{"start":{"line":19,"column":12},"end":{"line":19,"column":35}},"20":{"start":{"line":20,"column":0},"end":{"line":27,"column":2}},"21":{"start":{"line":21,"column":21},"end":{"line":21,"column":62}},"22":{"start":{"line":22,"column":24},"end":{"line":22,"column":71}},"23":{"start":{"line":23,"column":4},"end":{"line":24,"column":65}},"24":{"start":{"line":24,"column":8},"end":{"line":24,"column":65}},"25":{"start":{"line":25,"column":4},"end":{"line":26,"column":68}},"26":{"start":{"line":26,"column":8},"end":{"line":26,"column":68}},"27":{"start":{"line":28,"column":0},"end":{"line":43,"column":3}},"28":{"start":{"line":28,"column":40},"end":{"line":43,"column":2}},"29":{"start":{"line":29,"column":4},"end":{"line":29,"column":40}},"30":{"start":{"line":32,"column":4},"end":{"line":42,"column":5}},"31":{"start":{"line":33,"column":22},"end":{"line":33,"column":86}},"32":{"start":{"line":35,"column":8},"end":{"line":35,"column":59}},"33":{"start":{"line":36,"column":8},"end":{"line":36,"column":26}},"34":{"start":{"line":38,"column":8},"end":{"line":38,"column":21}},"35":{"start":{"line":41,"column":8},"end":{"line":41,"column":69}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":44},"end":{"line":2,"column":45}},"loc":{"start":{"line":2,"column":89},"end":{"line":10,"column":1}},"line":2},"1":{"name":"adopt","decl":{"start":{"line":3,"column":13},"end":{"line":3,"column":18}},"loc":{"start":{"line":3,"column":26},"end":{"line":3,"column":112}},"line":3},"2":{"name":"(anonymous_2)","decl":{"start":{"line":3,"column":70},"end":{"line":3,"column":71}},"loc":{"start":{"line":3,"column":89},"end":{"line":3,"column":108}},"line":3},"3":{"name":"(anonymous_3)","decl":{"start":{"line":4,"column":36},"end":{"line":4,"column":37}},"loc":{"start":{"line":4,"column":63},"end":{"line":9,"column":5}},"line":4},"4":{"name":"fulfilled","decl":{"start":{"line":5,"column":17},"end":{"line":5,"column":26}},"loc":{"start":{"line":5,"column":34},"end":{"line":5,"column":99}},"line":5},"5":{"name":"rejected","decl":{"start":{"line":6,"column":17},"end":{"line":6,"column":25}},"loc":{"start":{"line":6,"column":33},"end":{"line":6,"column":102}},"line":6},"6":{"name":"step","decl":{"start":{"line":7,"column":17},"end":{"line":7,"column":21}},"loc":{"start":{"line":7,"column":30},"end":{"line":7,"column":118}},"line":7},"7":{"name":"(anonymous_7)","decl":{"start":{"line":11,"column":56},"end":{"line":11,"column":57}},"loc":{"start":{"line":11,"column":71},"end":{"line":13,"column":1}},"line":11},"8":{"name":"(anonymous_8)","decl":{"start":{"line":20,"column":24},"end":{"line":20,"column":25}},"loc":{"start":{"line":20,"column":34},"end":{"line":27,"column":1}},"line":20},"9":{"name":"(anonymous_9)","decl":{"start":{"line":28,"column":24},"end":{"line":28,"column":25}},"loc":{"start":{"line":28,"column":40},"end":{"line":43,"column":2}},"line":28},"10":{"name":"(anonymous_10)","decl":{"start":{"line":28,"column":74},"end":{"line":28,"column":75}},"loc":{"start":{"line":28,"column":87},"end":{"line":43,"column":1}},"line":28}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":17},"end":{"line":2,"column":21}},{"start":{"line":2,"column":25},"end":{"line":2,"column":39}},{"start":{"line":2,"column":44},"end":{"line":10,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":35},"end":{"line":3,"column":109}},"type":"cond-expr","locations":[{"start":{"line":3,"column":56},"end":{"line":3,"column":61}},{"start":{"line":3,"column":64},"end":{"line":3,"column":109}}],"line":3},"2":{"loc":{"start":{"line":4,"column":16},"end":{"line":4,"column":34}},"type":"binary-expr","locations":[{"start":{"line":4,"column":16},"end":{"line":4,"column":17}},{"start":{"line":4,"column":22},"end":{"line":4,"column":33}}],"line":4},"3":{"loc":{"start":{"line":7,"column":32},"end":{"line":7,"column":115}},"type":"cond-expr","locations":[{"start":{"line":7,"column":46},"end":{"line":7,"column":67}},{"start":{"line":7,"column":70},"end":{"line":7,"column":115}}],"line":7},"4":{"loc":{"start":{"line":8,"column":51},"end":{"line":8,"column":67}},"type":"binary-expr","locations":[{"start":{"line":8,"column":51},"end":{"line":8,"column":61}},{"start":{"line":8,"column":65},"end":{"line":8,"column":67}}],"line":8},"5":{"loc":{"start":{"line":11,"column":22},"end":{"line":13,"column":1}},"type":"binary-expr","locations":[{"start":{"line":11,"column":23},"end":{"line":11,"column":27}},{"start":{"line":11,"column":31},"end":{"line":11,"column":51}},{"start":{"line":11,"column":56},"end":{"line":13,"column":1}}],"line":11},"6":{"loc":{"start":{"line":12,"column":11},"end":{"line":12,"column":61}},"type":"cond-expr","locations":[{"start":{"line":12,"column":37},"end":{"line":12,"column":40}},{"start":{"line":12,"column":43},"end":{"line":12,"column":61}}],"line":12},"7":{"loc":{"start":{"line":12,"column":12},"end":{"line":12,"column":33}},"type":"binary-expr","locations":[{"start":{"line":12,"column":12},"end":{"line":12,"column":15}},{"start":{"line":12,"column":19},"end":{"line":12,"column":33}}],"line":12},"8":{"loc":{"start":{"line":23,"column":4},"end":{"line":24,"column":65}},"type":"if","locations":[{"start":{"line":23,"column":4},"end":{"line":24,"column":65}},{"start":{"line":23,"column":4},"end":{"line":24,"column":65}}],"line":23},"9":{"loc":{"start":{"line":25,"column":4},"end":{"line":26,"column":68}},"type":"if","locations":[{"start":{"line":25,"column":4},"end":{"line":26,"column":68}},{"start":{"line":25,"column":4},"end":{"line":26,"column":68}}],"line":25}},"s":{"0":1,"1":4,"2":2,"3":2,"4":4,"5":4,"6":0,"7":0,"8":0,"9":0,"10":6,"11":2,"12":1,"13":1,"14":1,"15":1,"16":1,"17":1,"18":1,"19":1,"20":1,"21":4,"22":4,"23":4,"24":0,"25":4,"26":1,"27":1,"28":2,"29":2,"30":2,"31":2,"32":2,"33":2,"34":2,"35":0},"f":{"0":2,"1":4,"2":2,"3":2,"4":4,"5":0,"6":6,"7":1,"8":4,"9":2,"10":2},"b":{"0":[1,1,1],"1":[2,2],"2":[2,2],"3":[2,4],"4":[2,2],"5":[1,1,1],"6":[1,0],"7":[1,1],"8":[0,4],"9":[1,3]},"inputSourceMap":{"version":3,"file":"E:/react/c04-typescript/backend/src/controllers/utils/auth.util.ts","sources":["E:/react/c04-typescript/backend/src/controllers/utils/auth.util.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;AAEA,8DAA2D;AAG3D,2CAAsE;AACtE,uEAA8C;AAC9C,MAAM,GAAG,GAAG,OAAO,CAAC,cAAc,CAAC,CAAA;AAEtB,QAAA,aAAa,GAAG,CAAC,IAAW,EAAM,EAAE;IAC7C,IAAI,UAAU,GAAG,6BAAiB,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;IAC/C,IAAI,aAAa,GAAG,gCAAoB,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;IAExD,IAAG,UAAU;QACT,MAAM,IAAI,6BAAa,CAAC,GAAG,EAAC,UAAU,CAAC,CAAA;IAC3C,IAAG,aAAa;QACZ,MAAM,IAAI,6BAAa,CAAC,GAAG,EAAC,aAAa,CAAC,CAAA;AAClD,CAAC,CAAA;AAEY,QAAA,aAAa,GAAG,CAAM,IAAU,EAAE,IAAiB,EAAE,EAAE;IAChE,OAAO,CAAC,GAAG,CAAC,sBAAsB,CAAC,CAAA;IAEnC,mBAAmB;IACnB,oEAAoE;IACpE,IAAG;QACC,MAAM,KAAK,GAAG,MAAM,GAAG,CAAC,IAAI,CACA,EAAC,GAAG,EAAC,IAAI,CAAC,GAAG,EAAC,EACd,mBAAS,CAAC,SAAS,CAAC,CAAC;QACjD,qBAAqB;QACrB,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,EAAC,KAAK,EAAC,KAAK,EAAC,CAAC,CAAA;QAC/C,MAAM,IAAI,CAAC,IAAI,EAAE,CAAA;QACjB,mBAAmB;QACnB,OAAO,KAAK,CAAA;KACf;IAAA,OAAM,CAAC,EAAC;QACL,IAAI,CAAC,IAAI,6BAAa,CAAC,CAAC,CAAC,MAAM,EAAE,CAAC,CAAC,OAAO,CAAC,CAAC,CAAA;KAC/C;AACL,CAAC,CAAA,CAAA","sourcesContent":["import { NextFunction } from \"express\";\r\nimport { nextTick } from \"process\";\r\nimport { HttpException } from \"../../common/HttpException\";\r\nimport { ILogin } from \"../../interfaces/IAuth\";\r\nimport { IUser } from \"../../interfaces/IUser\";\r\nimport { validateUserEmail, validateUserPassword } from \"./user.util\";\r\nimport jwtConfig from '../../config/jwtConfig'\r\nconst jwt = require('jsonwebtoken')\r\n\r\nexport const validateLogin = (body:ILogin):void=>{\r\n    let errorEmail = validateUserEmail(body.email);\r\n    let errorPassword = validateUserPassword(body.password);\r\n    \r\n    if(errorEmail)\r\n        throw new HttpException(422,errorEmail)\r\n    if(errorPassword)\r\n        throw new HttpException(422,errorPassword)\r\n}\r\n\r\nexport const generateToken = async(user:IUser, next:NextFunction) => {\r\n    console.log(\"generate toke method\")\r\n    \r\n    //console.log(user)\r\n    //check this --> const token = jwt.sign({user}, process.env.JWT_KEY)\r\n    try{\r\n        const token = await jwt.sign(\r\n                                    {_id:user._id}, \r\n                                    jwtConfig.jwtSecret);\r\n        //console.log(token);\r\n        user.tokens = user.tokens.concat({token:token})\r\n        await user.save()\r\n        //console.log(user)\r\n        return token\r\n    }catch(e){\r\n        next(new HttpException(e.status, e.message))\r\n    }\r\n}"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"3669ab2051c0937d224f7be1f88b37d4f9d9a8bb","contentHash":"f3ad3d0a024feb8a78368fa07711327837b49a0ef64584dc4344fd9fff76bfc4"},"E:\\react\\c04-typescript\\backend\\src\\config\\jwtConfig.ts":{"path":"E:\\react\\c04-typescript\\backend\\src\\config\\jwtConfig.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":0},"end":{"line":5,"column":2}}},"fnMap":{},"branchMap":{},"s":{"0":1,"1":1},"f":{},"b":{},"inputSourceMap":{"version":3,"file":"E:/react/c04-typescript/backend/src/config/jwtConfig.ts","sources":["E:/react/c04-typescript/backend/src/config/jwtConfig.ts"],"names":[],"mappings":";;AAAA,kBAAe;IACX,SAAS,EAAE,SAAS;CACvB,CAAC","sourcesContent":["export default {\r\n    jwtSecret: \"@QEGTUI\"\r\n};"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"2ecbe9d21820789af039ab5c62156b99d3c92784","contentHash":"b53737cd9a447924d154cf303fa719c8ad488a3e43fbf9685d871ba36e5a6f85"},"E:\\react\\c04-typescript\\backend\\src\\middleware\\auth.middleware.ts":{"path":"E:\\react\\c04-typescript\\backend\\src\\middleware\\auth.middleware.ts","statementMap":{"0":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"1":{"start":{"line":3,"column":28},"end":{"line":3,"column":110}},"2":{"start":{"line":3,"column":91},"end":{"line":3,"column":106}},"3":{"start":{"line":4,"column":4},"end":{"line":9,"column":7}},"4":{"start":{"line":5,"column":36},"end":{"line":5,"column":97}},"5":{"start":{"line":5,"column":42},"end":{"line":5,"column":70}},"6":{"start":{"line":5,"column":85},"end":{"line":5,"column":95}},"7":{"start":{"line":6,"column":35},"end":{"line":6,"column":100}},"8":{"start":{"line":6,"column":41},"end":{"line":6,"column":73}},"9":{"start":{"line":6,"column":88},"end":{"line":6,"column":98}},"10":{"start":{"line":7,"column":32},"end":{"line":7,"column":116}},"11":{"start":{"line":8,"column":8},"end":{"line":8,"column":78}},"12":{"start":{"line":11,"column":22},"end":{"line":13,"column":1}},"13":{"start":{"line":12,"column":4},"end":{"line":12,"column":62}},"14":{"start":{"line":14,"column":0},"end":{"line":14,"column":62}},"15":{"start":{"line":15,"column":0},"end":{"line":15,"column":22}},"16":{"start":{"line":16,"column":24},"end":{"line":16,"column":58}},"17":{"start":{"line":17,"column":20},"end":{"line":17,"column":67}},"18":{"start":{"line":18,"column":15},"end":{"line":18,"column":57}},"19":{"start":{"line":19,"column":12},"end":{"line":19,"column":35}},"20":{"start":{"line":20,"column":0},"end":{"line":45,"column":3}},"21":{"start":{"line":20,"column":35},"end":{"line":45,"column":2}},"22":{"start":{"line":21,"column":4},"end":{"line":44,"column":5}},"23":{"start":{"line":22,"column":8},"end":{"line":22,"column":50}},"24":{"start":{"line":23,"column":21},"end":{"line":23,"column":54}},"25":{"start":{"line":24,"column":8},"end":{"line":26,"column":9}},"26":{"start":{"line":25,"column":12},"end":{"line":25,"column":89}},"27":{"start":{"line":27,"column":22},"end":{"line":27,"column":49}},"28":{"start":{"line":28,"column":21},"end":{"line":28,"column":69}},"29":{"start":{"line":29,"column":8},"end":{"line":29,"column":26}},"30":{"start":{"line":31,"column":26},"end":{"line":31,"column":73}},"31":{"start":{"line":32,"column":8},"end":{"line":32,"column":31}},"32":{"start":{"line":33,"column":8},"end":{"line":40,"column":9}},"33":{"start":{"line":34,"column":12},"end":{"line":34,"column":46}},"34":{"start":{"line":35,"column":12},"end":{"line":35,"column":37}},"35":{"start":{"line":36,"column":12},"end":{"line":36,"column":19}},"36":{"start":{"line":39,"column":12},"end":{"line":39,"column":83}},"37":{"start":{"line":43,"column":8},"end":{"line":43,"column":69}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":44},"end":{"line":2,"column":45}},"loc":{"start":{"line":2,"column":89},"end":{"line":10,"column":1}},"line":2},"1":{"name":"adopt","decl":{"start":{"line":3,"column":13},"end":{"line":3,"column":18}},"loc":{"start":{"line":3,"column":26},"end":{"line":3,"column":112}},"line":3},"2":{"name":"(anonymous_2)","decl":{"start":{"line":3,"column":70},"end":{"line":3,"column":71}},"loc":{"start":{"line":3,"column":89},"end":{"line":3,"column":108}},"line":3},"3":{"name":"(anonymous_3)","decl":{"start":{"line":4,"column":36},"end":{"line":4,"column":37}},"loc":{"start":{"line":4,"column":63},"end":{"line":9,"column":5}},"line":4},"4":{"name":"fulfilled","decl":{"start":{"line":5,"column":17},"end":{"line":5,"column":26}},"loc":{"start":{"line":5,"column":34},"end":{"line":5,"column":99}},"line":5},"5":{"name":"rejected","decl":{"start":{"line":6,"column":17},"end":{"line":6,"column":25}},"loc":{"start":{"line":6,"column":33},"end":{"line":6,"column":102}},"line":6},"6":{"name":"step","decl":{"start":{"line":7,"column":17},"end":{"line":7,"column":21}},"loc":{"start":{"line":7,"column":30},"end":{"line":7,"column":118}},"line":7},"7":{"name":"(anonymous_7)","decl":{"start":{"line":11,"column":56},"end":{"line":11,"column":57}},"loc":{"start":{"line":11,"column":71},"end":{"line":13,"column":1}},"line":11},"8":{"name":"(anonymous_8)","decl":{"start":{"line":20,"column":15},"end":{"line":20,"column":16}},"loc":{"start":{"line":20,"column":35},"end":{"line":45,"column":2}},"line":20},"9":{"name":"(anonymous_9)","decl":{"start":{"line":20,"column":69},"end":{"line":20,"column":70}},"loc":{"start":{"line":20,"column":82},"end":{"line":45,"column":1}},"line":20}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":17},"end":{"line":2,"column":21}},{"start":{"line":2,"column":25},"end":{"line":2,"column":39}},{"start":{"line":2,"column":44},"end":{"line":10,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":35},"end":{"line":3,"column":109}},"type":"cond-expr","locations":[{"start":{"line":3,"column":56},"end":{"line":3,"column":61}},{"start":{"line":3,"column":64},"end":{"line":3,"column":109}}],"line":3},"2":{"loc":{"start":{"line":4,"column":16},"end":{"line":4,"column":34}},"type":"binary-expr","locations":[{"start":{"line":4,"column":16},"end":{"line":4,"column":17}},{"start":{"line":4,"column":22},"end":{"line":4,"column":33}}],"line":4},"3":{"loc":{"start":{"line":7,"column":32},"end":{"line":7,"column":115}},"type":"cond-expr","locations":[{"start":{"line":7,"column":46},"end":{"line":7,"column":67}},{"start":{"line":7,"column":70},"end":{"line":7,"column":115}}],"line":7},"4":{"loc":{"start":{"line":8,"column":51},"end":{"line":8,"column":67}},"type":"binary-expr","locations":[{"start":{"line":8,"column":51},"end":{"line":8,"column":61}},{"start":{"line":8,"column":65},"end":{"line":8,"column":67}}],"line":8},"5":{"loc":{"start":{"line":11,"column":22},"end":{"line":13,"column":1}},"type":"binary-expr","locations":[{"start":{"line":11,"column":23},"end":{"line":11,"column":27}},{"start":{"line":11,"column":31},"end":{"line":11,"column":51}},{"start":{"line":11,"column":56},"end":{"line":13,"column":1}}],"line":11},"6":{"loc":{"start":{"line":12,"column":11},"end":{"line":12,"column":61}},"type":"cond-expr","locations":[{"start":{"line":12,"column":37},"end":{"line":12,"column":40}},{"start":{"line":12,"column":43},"end":{"line":12,"column":61}}],"line":12},"7":{"loc":{"start":{"line":12,"column":12},"end":{"line":12,"column":33}},"type":"binary-expr","locations":[{"start":{"line":12,"column":12},"end":{"line":12,"column":15}},{"start":{"line":12,"column":19},"end":{"line":12,"column":33}}],"line":12},"8":{"loc":{"start":{"line":23,"column":21},"end":{"line":23,"column":54}},"type":"binary-expr","locations":[{"start":{"line":23,"column":21},"end":{"line":23,"column":48}},{"start":{"line":23,"column":52},"end":{"line":23,"column":54}}],"line":23},"9":{"loc":{"start":{"line":24,"column":8},"end":{"line":26,"column":9}},"type":"if","locations":[{"start":{"line":24,"column":8},"end":{"line":26,"column":9}},{"start":{"line":24,"column":8},"end":{"line":26,"column":9}}],"line":24},"10":{"loc":{"start":{"line":33,"column":8},"end":{"line":40,"column":9}},"type":"if","locations":[{"start":{"line":33,"column":8},"end":{"line":40,"column":9}},{"start":{"line":33,"column":8},"end":{"line":40,"column":9}}],"line":33}},"s":{"0":1,"1":1,"2":1,"3":2,"4":1,"5":1,"6":0,"7":0,"8":0,"9":0,"10":3,"11":2,"12":1,"13":2,"14":1,"15":1,"16":1,"17":1,"18":1,"19":1,"20":1,"21":2,"22":2,"23":2,"24":2,"25":2,"26":1,"27":2,"28":2,"29":1,"30":1,"31":1,"32":1,"33":1,"34":1,"35":1,"36":0,"37":1},"f":{"0":2,"1":1,"2":1,"3":2,"4":1,"5":0,"6":3,"7":2,"8":2,"9":2},"b":{"0":[1,1,1],"1":[0,1],"2":[2,2],"3":[2,1],"4":[2,2],"5":[1,1,1],"6":[1,1],"7":[2,2],"8":[2,1],"9":[1,1],"10":[1,0]},"inputSourceMap":{"version":3,"file":"E:/react/c04-typescript/backend/src/middleware/auth.middleware.ts","sources":["E:/react/c04-typescript/backend/src/middleware/auth.middleware.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;AACA,2DAAuD;AACvD,oEAA6C;AAC7C,0DAAiC;AACjC,MAAM,GAAG,GAAG,OAAO,CAAC,cAAc,CAAC,CAAA;AAGtB,QAAA,IAAI,GAAG,CAAM,GAAW,EAAE,GAAY,EAAE,IAAiB,EAAE,EAAE;IACtE,IACA;QACI,OAAO,CAAC,GAAG,CAAC,4BAA4B,CAAC,CAAA;QACzC,MAAM,IAAI,GAAG,GAAG,CAAC,MAAM,CAAC,eAAe,CAAC,IAAI,EAAE,CAAC;QAC/C,IAAG,IAAI,KAAK,EAAE,EAAC;YACX,IAAI,CAAC,IAAI,6BAAa,CAAC,GAAG,EAAC,8BAA8B,CAAC,CAAC,CAAA;SAC9D;QACD,MAAM,KAAK,GAAG,IAAI,CAAC,OAAO,CAAC,SAAS,EAAE,EAAE,CAAC,CAAA;QACzC,MAAM,IAAI,GAAG,GAAG,CAAC,MAAM,CAAC,KAAK,EAAE,mBAAS,CAAC,SAAS,CAAC,CAAA;QACnD,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,CAAA;QACjB,iBAAiB;QACjB,MAAM,SAAS,GAAG,MAAM,cAAI,CAAC,OAAO,CAAE,EAAC,GAAG,EAAC,IAAI,CAAC,GAAG,EAAC,CAAE,CAAC;QACvD,OAAO,CAAC,GAAG,CAAC,SAAS,CAAC,CAAC;QACvB,IAAI,SAAS,EAAE;YACX,GAAG,CAAC,MAAM,CAAC,UAAU,GAAG,SAAS,CAAC;YAClC,GAAG,CAAC,MAAM,CAAC,KAAK,GAAG,KAAK,CAAA;YAExB,IAAI,EAAE,CAAC;SACV;aAAI;YACD,IAAI,CAAC,IAAI,6BAAa,CAAC,GAAG,EAAC,wBAAwB,CAAC,CAAC,CAAA;SACxD;KAGJ;IAAC,OAAO,CAAC,EAAE;QACR,IAAI,CAAC,IAAI,6BAAa,CAAC,CAAC,CAAC,MAAM,EAAE,CAAC,CAAC,OAAO,CAAC,CAAC,CAAA;KAC/C;AACL,CAAC,CAAA,CAAA","sourcesContent":["import { NextFunction, Request, Response } from \"express\"\r\nimport { HttpException } from \"../common/HttpException\"\r\nimport  jwtConfig  from \"../config/jwtConfig\"\r\nimport User from \"../models/user\"\r\nconst jwt = require('jsonwebtoken')\r\n\r\n\r\nexport const auth = async(req:Request, res:Response, next:NextFunction) => {\r\n    try \r\n    {\r\n        console.log(\"entering to authentication\")\r\n        const auth = req.header('Authorization') || \"\";\r\n        if(auth === \"\"){\r\n            next(new HttpException(403,'auth - User NO Authenticated'))\r\n        }\r\n        const token = auth.replace('Bearer ', '')\r\n        const data = jwt.verify(token, jwtConfig.jwtSecret)\r\n        console.log(data)\r\n        //data={_id:<id>}\r\n        const foundUser = await User.findOne( {_id:data._id} );\r\n        console.log(foundUser);\r\n        if (foundUser) {\r\n            res.locals.jwtPayload = foundUser;\r\n            res.locals.token = token\r\n\r\n            next();\r\n        }else{\r\n            next(new HttpException(500,\"you are already logout\"))\r\n        }\r\n        \r\n        \r\n    } catch (e) {\r\n        next(new HttpException(e.status, e.message))\r\n    }\r\n}\r\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"1a7aebede4af5911ee38f6567064f1c9f9d99a24","contentHash":"22d6ca025f922af7f1251964b0c4c8f9ff9a63f67f0aa216de955979df67769b"},"E:\\react\\c04-typescript\\backend\\src\\middleware\\error.middleware.ts":{"path":"E:\\react\\c04-typescript\\backend\\src\\middleware\\error.middleware.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":30}},"2":{"start":{"line":4,"column":0},"end":{"line":13,"column":2}},"3":{"start":{"line":5,"column":4},"end":{"line":11,"column":5}},"4":{"start":{"line":7,"column":23},"end":{"line":7,"column":42}},"5":{"start":{"line":8,"column":24},"end":{"line":8,"column":94}},"6":{"start":{"line":9,"column":28},"end":{"line":9,"column":51}},"7":{"start":{"line":10,"column":8},"end":{"line":10,"column":78}},"8":{"start":{"line":12,"column":4},"end":{"line":12,"column":18}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":4,"column":23},"end":{"line":4,"column":24}},"loc":{"start":{"line":4,"column":59},"end":{"line":13,"column":1}},"line":4}},"branchMap":{"0":{"loc":{"start":{"line":5,"column":4},"end":{"line":11,"column":5}},"type":"if","locations":[{"start":{"line":5,"column":4},"end":{"line":11,"column":5}},{"start":{"line":5,"column":4},"end":{"line":11,"column":5}}],"line":5},"1":{"loc":{"start":{"line":7,"column":23},"end":{"line":7,"column":42}},"type":"binary-expr","locations":[{"start":{"line":7,"column":23},"end":{"line":7,"column":35}},{"start":{"line":7,"column":39},"end":{"line":7,"column":42}}],"line":7},"2":{"loc":{"start":{"line":8,"column":24},"end":{"line":8,"column":94}},"type":"binary-expr","locations":[{"start":{"line":8,"column":24},"end":{"line":8,"column":37}},{"start":{"line":8,"column":41},"end":{"line":8,"column":94}}],"line":8},"3":{"loc":{"start":{"line":9,"column":28},"end":{"line":9,"column":51}},"type":"binary-expr","locations":[{"start":{"line":9,"column":28},"end":{"line":9,"column":45}},{"start":{"line":9,"column":49},"end":{"line":9,"column":51}}],"line":9}},"s":{"0":1,"1":1,"2":1,"3":18,"4":18,"5":18,"6":18,"7":18,"8":0},"f":{"0":18},"b":{"0":[18,0],"1":[18,0],"2":[18,0],"3":[18,18]},"inputSourceMap":{"version":3,"file":"E:/react/c04-typescript/backend/src/middleware/error.middleware.ts","sources":["E:/react/c04-typescript/backend/src/middleware/error.middleware.ts"],"names":[],"mappings":";;;AAGa,QAAA,YAAY,GAAG,CAC1B,KAAoB,EACpB,OAAgB,EAChB,QAAkB,EAClB,IAAkB,EAClB,EAAE;IACF,IAAG,KAAK,KAAK,IAAI,EAAC;QAEhB,qBAAqB;QACrB,MAAM,MAAM,GAAG,KAAK,CAAC,MAAM,IAAI,GAAG,CAAC;QACnC,MAAM,OAAO,GAAG,KAAK,CAAC,OAAO,IAAI,qDAAqD,CAAC;QACvF,MAAM,WAAW,GAAG,KAAK,CAAC,WAAW,IAAI,EAAE,CAAC;QAE5C,OAAO,QAAQ,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC,IAAI,CAAC,EAAC,MAAM,EAAC,OAAO,EAAC,WAAW,EAAC,CAAC,CAAC;KACnE;IACC,OAAO,IAAI,EAAE,CAAC;AAClB,CAAC,CAAC","sourcesContent":["import {HttpException} from \"../common/HttpException\";\r\nimport { Request, Response, NextFunction } from \"express\";\r\n\r\nexport const errorHandler = (\r\n  error: HttpException,\r\n  request: Request,\r\n  response: Response,\r\n  next: NextFunction\r\n) => {\r\n  if(error !== null){\r\n    \r\n    //console.log(error);\r\n    const status = error.status || 500;\r\n    const message = error.message || \"It's not you. It's us. We are having some problems.\";\r\n    const description = error.description || \"\";\r\n  \r\n    return response.status(status).send({status,message,description});\r\n  }\r\n    return next();\r\n};"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"6b159faf3a9143fba199d5a71efbb50682846189","contentHash":"4b2bfa5e1a244a42666bfe1f21e91a4a61730bf5003b61b28dd5585349a4a223"},"E:\\react\\c04-typescript\\backend\\src\\middleware\\notFound.middleware.ts":{"path":"E:\\react\\c04-typescript\\backend\\src\\middleware\\notFound.middleware.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":33}},"2":{"start":{"line":4,"column":0},"end":{"line":7,"column":2}},"3":{"start":{"line":5,"column":20},"end":{"line":5,"column":40}},"4":{"start":{"line":6,"column":4},"end":{"line":6,"column":63}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":4,"column":26},"end":{"line":4,"column":27}},"loc":{"start":{"line":4,"column":49},"end":{"line":7,"column":1}},"line":4}},"branchMap":{},"s":{"0":1,"1":1,"2":1,"3":4,"4":4},"f":{"0":4},"b":{},"inputSourceMap":{"version":3,"file":"E:/react/c04-typescript/backend/src/middleware/notFound.middleware.ts","sources":["E:/react/c04-typescript/backend/src/middleware/notFound.middleware.ts"],"names":[],"mappings":";;;AAEa,QAAA,eAAe,GAAG,CAC7B,OAAgB,EAChB,QAAkB,EAClB,EAAE;IAEF,MAAM,OAAO,GAAG,oBAAoB,CAAC;IAErC,OAAO,QAAQ,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,EAAC,MAAM,EAAC,GAAG,EAAC,OAAO,EAAC,CAAC,CAAC;AACzD,CAAC,CAAC","sourcesContent":["import { Request, Response } from \"express\";\r\n\r\nexport const notFoundHandler = (\r\n  request: Request,\r\n  response: Response\r\n) => {\r\n\r\n  const message = \"Resource not found\";\r\n\r\n  return response.status(404).send({status:404,message});\r\n};"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"056731b75b8a3be0c35d2147a985658e5248c62c","contentHash":"ef651b0e26862584322f755edd17aef9461cde2b1a4e93eaa459503185b29e81"},"E:\\react\\c04-typescript\\backend\\src\\config\\portConfig.ts":{"path":"E:\\react\\c04-typescript\\backend\\src\\config\\portConfig.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":22}},"2":{"start":{"line":5,"column":0},"end":{"line":5,"column":20}},"3":{"start":{"line":6,"column":0},"end":{"line":8,"column":1}},"4":{"start":{"line":7,"column":4},"end":{"line":7,"column":24}},"5":{"start":{"line":9,"column":0},"end":{"line":15,"column":1}},"6":{"start":{"line":10,"column":4},"end":{"line":13,"column":5}},"7":{"start":{"line":11,"column":8},"end":{"line":11,"column":41}},"8":{"start":{"line":12,"column":8},"end":{"line":12,"column":24}},"9":{"start":{"line":14,"column":4},"end":{"line":14,"column":50}}},"fnMap":{},"branchMap":{"0":{"loc":{"start":{"line":6,"column":0},"end":{"line":8,"column":1}},"type":"if","locations":[{"start":{"line":6,"column":0},"end":{"line":8,"column":1}},{"start":{"line":6,"column":0},"end":{"line":8,"column":1}}],"line":6},"1":{"loc":{"start":{"line":9,"column":0},"end":{"line":15,"column":1}},"type":"if","locations":[{"start":{"line":9,"column":0},"end":{"line":15,"column":1}},{"start":{"line":9,"column":0},"end":{"line":15,"column":1}}],"line":9},"2":{"loc":{"start":{"line":10,"column":4},"end":{"line":13,"column":5}},"type":"if","locations":[{"start":{"line":10,"column":4},"end":{"line":13,"column":5}},{"start":{"line":10,"column":4},"end":{"line":13,"column":5}}],"line":10}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":0,"7":0,"8":0,"9":0},"f":{},"b":{"0":[1,0],"1":[0,1],"2":[0,0]},"inputSourceMap":{"version":3,"file":"E:/react/c04-typescript/backend/src/config/portConfig.ts","sources":["E:/react/c04-typescript/backend/src/config/portConfig.ts"],"names":[],"mappings":";;;AAAA,0BAA0B;AACf,QAAA,IAAI,GAAU,IAAI,CAAC;AAG9B,IAAI,OAAO,CAAC,GAAG,CAAC,QAAQ,KAAK,MAAM,EACnC;IACI,YAAI,GAAG,IAAI,CAAC;CACf;AACD,IAAI,OAAO,CAAC,GAAG,CAAC,QAAQ,KAAK,YAAY,EACzC;IACI,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,IAAI,EAAE;QACnB,OAAO,CAAC,GAAG,CAAC,mBAAmB,CAAC,CAAA;QAChC,OAAO,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;KAClB;IAEF,YAAI,GAAG,QAAQ,CAAC,OAAO,CAAC,GAAG,CAAC,IAAc,EAAE,EAAE,CAAC,CAAC;CACnD","sourcesContent":["//default development port\r\nexport let PORT:number = 3005;\r\n\r\n\r\nif (process.env.NODE_ENV === 'test') \r\n{\r\n    PORT = 3001;\r\n} \r\nif (process.env.NODE_ENV === 'production') \r\n{\r\n    if (!process.env.PORT) {\r\n        console.log(\"PORT not declared\")\r\n        process.exit(1);\r\n     }\r\n    \r\n    PORT = parseInt(process.env.PORT as string, 10);\r\n}\r\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"3251dfcc64c5311c9ac3c0a67471f690efdc8192","contentHash":"3254a79e7cdb0fd209877f90777142c95d4c51b7556a98cca31f0147cfdd0d78"},"E:\\react\\c04-typescript\\backend\\src\\config\\db.ts":{"path":"E:\\react\\c04-typescript\\backend\\src\\config\\db.ts","statementMap":{"0":{"start":{"line":2,"column":17},"end":{"line":2,"column":36}},"1":{"start":{"line":3,"column":15},"end":{"line":3,"column":51}},"2":{"start":{"line":4,"column":16},"end":{"line":4,"column":115}},"3":{"start":{"line":5,"column":19},"end":{"line":5,"column":63}},"4":{"start":{"line":6,"column":16},"end":{"line":16,"column":1}},"5":{"start":{"line":7,"column":4},"end":{"line":15,"column":7}},"6":{"start":{"line":8,"column":18},"end":{"line":8,"column":24}},"7":{"start":{"line":9,"column":8},"end":{"line":10,"column":29}},"8":{"start":{"line":10,"column":12},"end":{"line":10,"column":29}},"9":{"start":{"line":11,"column":8},"end":{"line":12,"column":26}},"10":{"start":{"line":12,"column":12},"end":{"line":12,"column":26}},"11":{"start":{"line":14,"column":8},"end":{"line":14,"column":48}},"12":{"start":{"line":17,"column":26},"end":{"line":21,"column":1}},"13":{"start":{"line":18,"column":4},"end":{"line":20,"column":37}},"14":{"start":{"line":19,"column":20},"end":{"line":19,"column":29}},"15":{"start":{"line":20,"column":24},"end":{"line":20,"column":35}},"16":{"start":{"line":22,"column":24},"end":{"line":22,"column":51}},"17":{"start":{"line":22,"column":30},"end":{"line":22,"column":51}},"18":{"start":{"line":23,"column":0},"end":{"line":23,"column":46}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":6,"column":16},"end":{"line":6,"column":17}},"loc":{"start":{"line":6,"column":22},"end":{"line":16,"column":1}},"line":6},"1":{"name":"(anonymous_1)","decl":{"start":{"line":7,"column":23},"end":{"line":7,"column":24}},"loc":{"start":{"line":7,"column":44},"end":{"line":15,"column":5}},"line":7},"2":{"name":"(anonymous_2)","decl":{"start":{"line":17,"column":26},"end":{"line":17,"column":27}},"loc":{"start":{"line":17,"column":52},"end":{"line":21,"column":1}},"line":17},"3":{"name":"(anonymous_3)","decl":{"start":{"line":19,"column":14},"end":{"line":19,"column":15}},"loc":{"start":{"line":19,"column":20},"end":{"line":19,"column":29}},"line":19},"4":{"name":"(anonymous_4)","decl":{"start":{"line":20,"column":15},"end":{"line":20,"column":16}},"loc":{"start":{"line":20,"column":24},"end":{"line":20,"column":35}},"line":20},"5":{"name":"(anonymous_5)","decl":{"start":{"line":22,"column":24},"end":{"line":22,"column":25}},"loc":{"start":{"line":22,"column":30},"end":{"line":22,"column":51}},"line":22}},"branchMap":{"0":{"loc":{"start":{"line":9,"column":8},"end":{"line":10,"column":29}},"type":"if","locations":[{"start":{"line":9,"column":8},"end":{"line":10,"column":29}},{"start":{"line":9,"column":8},"end":{"line":10,"column":29}}],"line":9},"1":{"loc":{"start":{"line":11,"column":8},"end":{"line":12,"column":26}},"type":"if","locations":[{"start":{"line":11,"column":8},"end":{"line":12,"column":26}},{"start":{"line":11,"column":8},"end":{"line":12,"column":26}}],"line":11}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":0,"11":1,"12":1,"13":1,"14":1,"15":0,"16":1,"17":0,"18":1},"f":{"0":1,"1":1,"2":1,"3":1,"4":0,"5":0},"b":{"0":[1,0],"1":[0,1]},"inputSourceMap":{"version":3,"file":"E:/react/c04-typescript/backend/src/config/db.ts","sources":["E:/react/c04-typescript/backend/src/config/db.ts"],"names":[],"mappings":";AAAA,MAAM,QAAQ,GAAG,OAAO,CAAC,UAAU,CAAC,CAAC;AACrC,MAAM,MAAM,GAAG,oCAAoC,CAAC;AACpD,MAAM,OAAO,GAAG,mGAAmG,CAAA;AACnH,MAAM,UAAU,GAAG,4CAA4C,CAAC;AAEhE,MAAM,OAAO,GAAG,GAAE,EAAE;IAChB,OAAO,IAAI,OAAO,CAAC,CAAC,OAAO,EAAE,MAAM,EAAE,EAAE;QAE/B,IAAI,GAAG,GAAG,MAAM,CAAA;QAChB,IAAI,OAAO,CAAC,GAAG,CAAC,QAAQ,KAAK,MAAM;YAC/B,GAAG,GAAG,UAAU,CAAA;QACpB,IAAG,OAAO,CAAC,GAAG,CAAC,QAAQ,KAAK,YAAY;YACpC,GAAG,GAAG,OAAO,CAAA;QACjB,gBAAgB;QAChB,iBAAiB,CAAC,OAAO,EAAE,MAAM,EAAE,GAAG,CAAC,CAAC;IAC5C,CAAC,CACJ,CAAC,CAAA,aAAa;AACnB,CAAC,CAAA;AAED,MAAM,iBAAiB,GAAG,CAAC,OAAiB,EAAE,MAAe,EAAE,GAAU,EAAC,EAAE;IAExE,QAAQ,CAAC,OAAO,CAAC,GAAG,EAAE,EAAC,eAAe,EAAE,IAAI,EAAE,cAAc,EAAE,IAAI,EAAG,kBAAkB,EAAE,IAAI,EAAE,gBAAgB,EAAC,KAAK,EAAE,CAAC;SACnH,IAAI,CAAC,GAAE,EAAE,CAAC,OAAO,EAAE,CAAC;SACpB,KAAK,CAAC,CAAC,GAAU,EAAE,EAAE,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,CAAC;AAC5C,CAAC,CAAA;AAED,MAAM,eAAe,GAAG,GAAE,EAAE,CAAC,QAAQ,CAAC,UAAU,EAAE,CAAC;AAGnD,iBAAS,EAAE,OAAO,EAAE,eAAe,EAAE,CAAC","sourcesContent":["const mongoose = require('mongoose');\r\nconst DB_URI = 'mongodb://localhost/c04-typescript';\r\nconst DB_PROD = 'mongodb+srv://draconetics:draconetics@cluster0-74ml0.mongodb.net/test?retryWrites=true&w=majority'\r\nconst DB_TESTING = 'mongodb://localhost/c04-typescript-testing';\r\n    \r\nconst connect = ()=> {\r\n    return new Promise((resolve, reject) => \r\n        {\r\n            let uri = DB_URI\r\n            if (process.env.NODE_ENV === 'test') \r\n                uri = DB_TESTING\r\n            if(process.env.NODE_ENV === 'production')\r\n                uri = DB_PROD\r\n            //developer mode\r\n            connectToDataBase(resolve, reject, uri);                \r\n        }\r\n    );//end promise\r\n}\r\n\r\nconst connectToDataBase = (resolve: Function, reject:Function, url:string)=>\r\n{\r\n    mongoose.connect(url, {useNewUrlParser: true, useCreateIndex: true,  useUnifiedTopology: true, useFindAndModify:false })\r\n        .then(()=> resolve())\r\n        .catch((err:Object) => reject(err));\r\n}\r\n    \r\nconst closeConnection = ()=> mongoose.disconnect();\r\n\r\n\r\nexport = { connect, closeConnection };"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"69b94207e78bc03ba32531be2afc1611bd2146ad","contentHash":"18d315be6c5eb66242f0c76d7d43d38942aa4601857294dc6ba218a8c2a4e8ea"}}